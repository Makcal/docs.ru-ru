---
description: Дополнительные сведения см. в статье как привязать данные с помощью источника данных проекта (службы данных WCF)
title: Как привязать данные с помощью источника данных проекта (службы данных WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data binding, WCF Data Services
- WCF Data Services, data binding
ms.assetid: 2477af0a-676f-44f7-b73d-e66208785509
ms.openlocfilehash: 42efbfcd241487e9e729c0d0bf2eba1f8f20d996
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99765715"
---
# <a name="how-to-bind-data-using-a-project-data-source-wcf-data-services"></a><span data-ttu-id="83d53-103">Как привязать данные с помощью источника данных проекта (службы данных WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="83d53-103">How to: Bind Data Using a Project Data Source (WCF Data Services)</span></span>

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

<span data-ttu-id="83d53-104">Вы можете создавать источники данных на основе созданных объектов данных в клиентском приложении службы данных WCF.</span><span class="sxs-lookup"><span data-stu-id="83d53-104">You can create data sources that are based on the generated data objects in an WCF Data Services client application.</span></span> <span data-ttu-id="83d53-105">При добавлении ссылки на службу данных с помощью диалогового окна **Добавление ссылки на службу** создается источник данных проекта вместе с созданными клиентскими классами данных.</span><span class="sxs-lookup"><span data-stu-id="83d53-105">When you add a reference to a data service by using the **Add Service Reference** dialog, a project data source is created along with the generated client data classes.</span></span> <span data-ttu-id="83d53-106">Для каждого набора сущностей, предоставляемого службой данных, создается один источник данных.</span><span class="sxs-lookup"><span data-stu-id="83d53-106">One data source is created for each entity set that the data service exposes.</span></span> <span data-ttu-id="83d53-107">Можно создавать формы, отображающие данные из службы, перетаскивая эти элементы источника данных из окна **Источники данных** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-107">You can create forms that display data from the service by dragging these data source items from the **Data Sources** window onto the designer.</span></span> <span data-ttu-id="83d53-108">Эти элементы становятся элементами управления, привязанными к источнику данных.</span><span class="sxs-lookup"><span data-stu-id="83d53-108">These items become controls that are bound to the data source.</span></span> <span data-ttu-id="83d53-109">Во время выполнения этот источник данных привязывается к экземпляру <xref:System.Data.Services.Client.DataServiceCollection%601> класса, который заполняется объектами, возвращаемыми запросом к службе данных.</span><span class="sxs-lookup"><span data-stu-id="83d53-109">During execution, this data source is bound to an instance of the <xref:System.Data.Services.Client.DataServiceCollection%601> class, which is filled with objects that are returned by a query to the data service.</span></span> <span data-ttu-id="83d53-110">Дополнительные сведения см. [в разделе Привязка данных к элементам управления](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="83d53-110">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>

 <span data-ttu-id="83d53-111">Примеры в этом разделе используют образец службы данных Northwind и автоматически сформированные клиентские классы службы данных.</span><span class="sxs-lookup"><span data-stu-id="83d53-111">The examples in this topic use the Northwind sample data service and autogenerated client data service classes.</span></span> <span data-ttu-id="83d53-112">Эта служба и классы данных клиента создаются при завершении [краткого руководства по службы данных WCF](quickstart-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="83d53-112">This service and the client data classes are created when you complete the [WCF Data Services quickstart](quickstart-wcf-data-services.md).</span></span>

## <a name="use-a-project-data-source-in-a-wpf-window"></a><span data-ttu-id="83d53-113">Использование источника данных проекта в окне WPF</span><span class="sxs-lookup"><span data-stu-id="83d53-113">Use a project data source in a WPF window</span></span>

1. <span data-ttu-id="83d53-114">В Visual Studio в проекте WPF добавьте ссылку на службу данных Northwind.</span><span class="sxs-lookup"><span data-stu-id="83d53-114">In Visual Studio, in a WPF project, add a reference to the Northwind data service.</span></span> <span data-ttu-id="83d53-115">Дополнительные сведения см. [в разделе инструкции. Добавление ссылки на службу данных](how-to-add-a-data-service-reference-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="83d53-115">For more information, see [How to: Add a Data Service Reference](how-to-add-a-data-service-reference-wcf-data-services.md).</span></span>

2. <span data-ttu-id="83d53-116">В окне **Источники данных** разверните `Customers` узел в источнике данных проекта **норсвиндентитиес** .</span><span class="sxs-lookup"><span data-stu-id="83d53-116">In the **Data Sources** window, expand the `Customers` node in the **NorthwindEntities** project data source.</span></span>

3. <span data-ttu-id="83d53-117">Щелкните элемент **CustomerID** , выберите **ComboBox** из списка и перетащите элемент **CustomerID** с узла **Customers** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-117">Click the **CustomerID** item, select **ComboBox** from the list, and drag the **CustomerID** item from the **Customers** node to the designer.</span></span>

     <span data-ttu-id="83d53-118">При этом в файле XAML для данного окна будут созданы следующие элементы объектов:</span><span class="sxs-lookup"><span data-stu-id="83d53-118">This creates the following object elements in the XAML file for the window:</span></span>

    - <span data-ttu-id="83d53-119">Элемент <xref:System.Windows.Data.CollectionViewSource> с именем `customersViewSource`.</span><span class="sxs-lookup"><span data-stu-id="83d53-119">A <xref:System.Windows.Data.CollectionViewSource> element named `customersViewSource`.</span></span> <span data-ttu-id="83d53-120">Свойству <xref:System.Windows.FrameworkElement.DataContext%2A> элемента объекта верхнего уровня <xref:System.Windows.Controls.Grid> присваивается значение нового объекта <xref:System.Windows.Data.CollectionViewSource>.</span><span class="sxs-lookup"><span data-stu-id="83d53-120">The <xref:System.Windows.FrameworkElement.DataContext%2A> property of the top-level <xref:System.Windows.Controls.Grid> object element is set to this new <xref:System.Windows.Data.CollectionViewSource>.</span></span>

    - <span data-ttu-id="83d53-121">Привязанный к данным элемент <xref:System.Windows.Controls.ComboBox> с именем `CustomerID`.</span><span class="sxs-lookup"><span data-stu-id="83d53-121">A data-bound <xref:System.Windows.Controls.ComboBox> named `CustomerID`.</span></span>

    - <span data-ttu-id="83d53-122">Объект <xref:System.Windows.Controls.Label>.</span><span class="sxs-lookup"><span data-stu-id="83d53-122">A <xref:System.Windows.Controls.Label>.</span></span>

4. <span data-ttu-id="83d53-123">Перетащите свойство навигации **Orders** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-123">Drag the **Orders** navigation property to the designer.</span></span>

     <span data-ttu-id="83d53-124">При этом в файле XAML для данного окна будут созданы следующие дополнительные элементы объектов:</span><span class="sxs-lookup"><span data-stu-id="83d53-124">This creates the following additional object elements in the XAML file for the window:</span></span>

    - <span data-ttu-id="83d53-125">Второй элемент <xref:System.Windows.Data.CollectionViewSource> с именем `customersOrdersViewSource`, источником для которого является объект `customerViewSource`.</span><span class="sxs-lookup"><span data-stu-id="83d53-125">A second <xref:System.Windows.Data.CollectionViewSource> element named `customersOrdersViewSource`, the source of which is the `customerViewSource`.</span></span>

    - <span data-ttu-id="83d53-126">Привязанный к данным элемент управления <xref:System.Windows.Controls.DataGrid> с именем `ordersDataGrid`.</span><span class="sxs-lookup"><span data-stu-id="83d53-126">A data-bound <xref:System.Windows.Controls.DataGrid> control named `ordersDataGrid`.</span></span>

5. <span data-ttu-id="83d53-127">Используемых Перетащите дополнительные элементы из узла **Customers** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-127">(Optional) Drag additional items from the **Customers** node to the designer.</span></span>

6. <span data-ttu-id="83d53-128">Откройте кодовую страницу формы и добавьте следующие инструкции `using` (`Imports` в Visual Basic):</span><span class="sxs-lookup"><span data-stu-id="83d53-128">Open the code page for the form and add the following `using` statements (`Imports` in Visual Basic):</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersUsingWpf](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderswpf2.xaml.cs#customersordersusingwpf)]

7. <span data-ttu-id="83d53-129">В разделяемый класс, определяющий форму, добавьте следующий код, который создает экземпляр объекта <xref:System.Data.Objects.ObjectContext> и определяет константу `customerID`.</span><span class="sxs-lookup"><span data-stu-id="83d53-129">In the partial class that defines the form, add the following code that creates an <xref:System.Data.Objects.ObjectContext> instance and defines the `customerID` constant.</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersDefinitionWpf](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderswpf2.xaml.cs#customersordersdefinitionwpf)]
     [!code-vb[Astoria Northwind Client#CustomersOrdersDefinitionWpf](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderswpf2.xaml.vb#customersordersdefinitionwpf)]

8. <span data-ttu-id="83d53-130">В конструкторе выберите окно.</span><span class="sxs-lookup"><span data-stu-id="83d53-130">In the designer, select the window.</span></span>

    > [!NOTE]
    > <span data-ttu-id="83d53-131">Убедитесь, что выбрано само окно, а не содержимое этого окна.</span><span class="sxs-lookup"><span data-stu-id="83d53-131">Make sure that you select the window itself, rather than selecting content that is within the window.</span></span> <span data-ttu-id="83d53-132">Если окно выбрано, текстовое поле **имя** в верхней части окна **свойств** должно содержать имя окна.</span><span class="sxs-lookup"><span data-stu-id="83d53-132">If the window is selected, the **Name** text box near the top of the **Properties** window should contain the name of the window.</span></span>

9. <span data-ttu-id="83d53-133">В окне **Свойства** нажмите кнопку **события** .</span><span class="sxs-lookup"><span data-stu-id="83d53-133">In the **Properties** window, select the **Events** button.</span></span>

10. <span data-ttu-id="83d53-134">Найдите событие **загружено** , а затем дважды щелкните раскрывающийся список рядом с этим событием.</span><span class="sxs-lookup"><span data-stu-id="83d53-134">Find the **Loaded** event, and then double-click the drop-down list next to this event.</span></span>

     <span data-ttu-id="83d53-135">Visual Studio открывает файл с фоновым кодом для окна и формирует обработчик события <xref:System.Windows.FrameworkElement.Loaded>.</span><span class="sxs-lookup"><span data-stu-id="83d53-135">Visual Studio opens the code-behind file for the window and generates a <xref:System.Windows.FrameworkElement.Loaded> event handler.</span></span>

11. <span data-ttu-id="83d53-136">Скопируйте и вставьте во вновь созданный обработчик события <xref:System.Windows.FrameworkElement.Loaded> следующий код.</span><span class="sxs-lookup"><span data-stu-id="83d53-136">In the newly created <xref:System.Windows.FrameworkElement.Loaded> event handler, copy and paste the following code.</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersDataBindingWpf](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorderswpf2.xaml.cs#customersordersdatabindingwpf)]
     [!code-vb[Astoria Northwind Client#CustomersOrdersDataBindingWpf](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorderswpf2.xaml.vb#customersordersdatabindingwpf)]

12. <span data-ttu-id="83d53-137">Этот код создает экземпляр <xref:System.Data.Services.Client.DataServiceCollection%601> для типа `Customers` на основе выполнения запроса LINQ, который возвращает интерфейс <xref:System.Collections.Generic.IEnumerable%601> объекта `Customers` вместе со связанными объектами `Orders` из службы данных Northwind и привязывает его к объекту `customersViewSource`.</span><span class="sxs-lookup"><span data-stu-id="83d53-137">This code creates an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> for the `Customers` type based on the execution of a LINQ query that returns an <xref:System.Collections.Generic.IEnumerable%601> of `Customers` along with related `Orders` objects from the Northwind data service and binds it to the `customersViewSource`.</span></span>

## <a name="use-a-project-data-source-in-a-windows-form"></a><span data-ttu-id="83d53-138">Использование источника данных проекта в форме Windows Forms</span><span class="sxs-lookup"><span data-stu-id="83d53-138">Use a project data source in a Windows form</span></span>

1. <span data-ttu-id="83d53-139">В окне **Источники данных** разверните узел **Customers (клиенты** ) в источнике данных проекта **норсвиндентитиес** .</span><span class="sxs-lookup"><span data-stu-id="83d53-139">In the **Data Sources** window, expand the **Customers** node in the **NorthwindEntities** project data source.</span></span>

2. <span data-ttu-id="83d53-140">Щелкните элемент **CustomerID** , выберите **ComboBox** из списка и перетащите элемент **CustomerID** с узла **Customers** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-140">Click the **CustomerID** item, select **ComboBox** from the list, and drag the **CustomerID** item from the **Customers** node to the designer.</span></span>

     <span data-ttu-id="83d53-141">Это приведет к созданию следующих элементов управления в форме:</span><span class="sxs-lookup"><span data-stu-id="83d53-141">This creates the following controls on the form:</span></span>

    - <span data-ttu-id="83d53-142">Экземпляр <xref:System.Windows.Forms.BindingSource> с именем `customersBindingSource`.</span><span class="sxs-lookup"><span data-stu-id="83d53-142">An instance of <xref:System.Windows.Forms.BindingSource> named `customersBindingSource`.</span></span>

    - <span data-ttu-id="83d53-143">Экземпляр <xref:System.Windows.Forms.BindingNavigator> с именем `customersBindingNavigator`.</span><span class="sxs-lookup"><span data-stu-id="83d53-143">An instance of <xref:System.Windows.Forms.BindingNavigator> named `customersBindingNavigator`.</span></span> <span data-ttu-id="83d53-144">Этот элемент управления можно удалить, так как он не понадобится.</span><span class="sxs-lookup"><span data-stu-id="83d53-144">You can delete this control as it will not be needed.</span></span>

    - <span data-ttu-id="83d53-145">Привязанный к данным элемент <xref:System.Windows.Forms.ComboBox> с именем `CustomerID`.</span><span class="sxs-lookup"><span data-stu-id="83d53-145">A data-bound <xref:System.Windows.Forms.ComboBox> named `CustomerID`.</span></span>

    - <span data-ttu-id="83d53-146">Объект <xref:System.Windows.Forms.Label>.</span><span class="sxs-lookup"><span data-stu-id="83d53-146">A <xref:System.Windows.Forms.Label>.</span></span>

3. <span data-ttu-id="83d53-147">Перетащите свойство навигации **Orders** в форму.</span><span class="sxs-lookup"><span data-stu-id="83d53-147">Drag the **Orders** navigation property to the form.</span></span>

4. <span data-ttu-id="83d53-148">Это приведет к созданию элемента управления `ordersBindingSource` и присваиванию свойству <xref:System.Windows.Forms.BindingSource.DataSource%2A> этого элемента управления значения `customersBindingSource`, а свойству <xref:System.Windows.Forms.BindingSource.DataMember%2A> — значения `Customers`.</span><span class="sxs-lookup"><span data-stu-id="83d53-148">This creates the `ordersBindingSource` control with the <xref:System.Windows.Forms.BindingSource.DataSource%2A> property of the control set to the `customersBindingSource` and the <xref:System.Windows.Forms.BindingSource.DataMember%2A> property set to `Customers`.</span></span> <span data-ttu-id="83d53-149">Кроме того, в форме будет создан привязанный к данным элемент управления `ordersDataGridView` в сочетании с элементом управления меткой, имеющим соответствующий заголовок.</span><span class="sxs-lookup"><span data-stu-id="83d53-149">It also creates the `ordersDataGridView` data-bound control on the form, accompanied by an appropriately titled label control.</span></span>

5. <span data-ttu-id="83d53-150">Используемых Перетащите дополнительные элементы из узла **Customers** в конструктор.</span><span class="sxs-lookup"><span data-stu-id="83d53-150">(Optional) Drag additional items from the **Customers** node to the designer.</span></span>

6. <span data-ttu-id="83d53-151">Откройте кодовую страницу формы и добавьте следующие инструкции `using` (`Imports` в Visual Basic):</span><span class="sxs-lookup"><span data-stu-id="83d53-151">Open the code page for the form and add the following `using` statements (`Imports` in Visual Basic):</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersUsing](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorders.cs#customersordersusing)]
     [!code-vb[Astoria Northwind Client#CustomersOrdersUsing](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorders.vb#customersordersusing)]

7. <span data-ttu-id="83d53-152">В разделяемый класс, определяющий форму, добавьте следующий код, который создает экземпляр объекта <xref:System.Data.Objects.ObjectContext> и определяет константу `customerID`.</span><span class="sxs-lookup"><span data-stu-id="83d53-152">In the partial class that defines the form, add the following code that creates an <xref:System.Data.Objects.ObjectContext> instance and defines the `customerID` constant.</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersDefinition](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorders.cs#customersordersdefinition)]
     [!code-vb[Astoria Northwind Client#CustomersOrdersDefinition](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorders.vb#customersordersdefinition)]

8. <span data-ttu-id="83d53-153">В конструкторе форм дважды щелкните форму.</span><span class="sxs-lookup"><span data-stu-id="83d53-153">In the form designer, double-click the form.</span></span>

     <span data-ttu-id="83d53-154">После этого будет открыта страница кода формы и создан метод обработчика события `Load` для этой формы.</span><span class="sxs-lookup"><span data-stu-id="83d53-154">This opens the code page for the form and creates the method that handles the `Load` event for the form.</span></span>

9. <span data-ttu-id="83d53-155">Скопируйте и вставьте в обработчике события `Load` следующий код.</span><span class="sxs-lookup"><span data-stu-id="83d53-155">In the `Load` event handler, copy and paste the following code.</span></span>

     [!code-csharp[Astoria Northwind Client#CustomersOrdersDataBinding](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/customerorders.cs#customersordersdatabinding)]
     [!code-vb[Astoria Northwind Client#CustomersOrdersDataBinding](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/customerorders.vb#customersordersdatabinding)]

10. <span data-ttu-id="83d53-156">Этот код создает экземпляр <xref:System.Data.Services.Client.DataServiceCollection%601> для типа `Customers` на основе выполнения запроса <xref:System.Data.Services.Client.DataServiceQuery%601>, который возвращает интерфейс <xref:System.Collections.Generic.IEnumerable%601> объекта `Customers` из службы данных Northwind и привязывает его к объекту `customersBindingSource`.</span><span class="sxs-lookup"><span data-stu-id="83d53-156">This code creates an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> for the `Customers` type based on the execution of a <xref:System.Data.Services.Client.DataServiceQuery%601> that returns an <xref:System.Collections.Generic.IEnumerable%601> of `Customers` from the Northwind data service and binds it to the `customersBindingSource`.</span></span>

## <a name="see-also"></a><span data-ttu-id="83d53-157">См. также</span><span class="sxs-lookup"><span data-stu-id="83d53-157">See also</span></span>

- [<span data-ttu-id="83d53-158">Библиотека клиентов служб данных WCF</span><span class="sxs-lookup"><span data-stu-id="83d53-158">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="83d53-159">Практическое руководство. Привязка данных к элементам Windows Presentation Foundation</span><span class="sxs-lookup"><span data-stu-id="83d53-159">How to: Bind Data to Windows Presentation Foundation Elements</span></span>](bind-data-to-wpf-elements-wcf-data-services.md)
