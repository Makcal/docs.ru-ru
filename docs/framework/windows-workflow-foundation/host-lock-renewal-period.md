---
description: 'Подробнее: период продления блокировки узла'
title: Период обновления блокировки узла
ms.date: 03/30/2017
ms.assetid: f8ba94fc-27e0-4d8e-8f85-50a6d2a3cd43
ms.openlocfilehash: 88348c4cebd7ac42657c4ba68238a3b58a8f0d1a
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99742217"
---
# <a name="host-lock-renewal-period"></a><span data-ttu-id="930b5-103">Период обновления блокировки узла</span><span class="sxs-lookup"><span data-stu-id="930b5-103">Host Lock Renewal Period</span></span>

<span data-ttu-id="930b5-104">Свойство **период обновления блокировки узла** в хранилище экземпляров рабочих процессов SQL позволяет указать период времени, в течение которого узел обновляет блокировку экземпляра рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="930b5-104">The **Host Lock Renewal Period** property of the SQL Workflow Instance Store lets you specify the time period within which the host renews its lock on a workflow instance.</span></span> <span data-ttu-id="930b5-105">Блокировка действует в течение периода обновления блокировки узла + 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="930b5-105">The lock remains valid for Host Lock Renewal Period + 30 seconds.</span></span> <span data-ttu-id="930b5-106">Если узел не обновляет блокировку в течение этого периода времени (иными словами, не продлевает аренду), срок действия блокировки прекращается и поставщик сохраняемости разблокирует экземпляр.</span><span class="sxs-lookup"><span data-stu-id="930b5-106">If the host fails to renew the lock (in other words, extend the lease) within this time period, the lock expires and the persistence provider unlocks the instance.</span></span> <span data-ttu-id="930b5-107">Значение этого свойства имеет тип TimeSpan в формате "чч: мм: СС".</span><span class="sxs-lookup"><span data-stu-id="930b5-107">The value for this property is of type TimeSpan of the form "hh:mm:ss".</span></span> <span data-ttu-id="930b5-108">Минимальное разрешенное значение — "00:00:01" (1 секунда).</span><span class="sxs-lookup"><span data-stu-id="930b5-108">The minimum permitted value is "00:00:01" (1 second).</span></span> <span data-ttu-id="930b5-109">Значение этого свойства по умолчанию — "00:00:30" (30 секунд).</span><span class="sxs-lookup"><span data-stu-id="930b5-109">The default value of this property is "00:00:30" (30 seconds).</span></span>  
  
 <span data-ttu-id="930b5-110">Это свойство важно в сценариях с отказом узла службы рабочего процесса, прежде чем он разблокирует принадлежащий ему экземпляр службы рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="930b5-110">This property is significant in scenarios where a workflow service host fails before it can unlock a workflow service instance that it owns.</span></span> <span data-ttu-id="930b5-111">В этом сценарии блокировка экземпляра службы рабочего процесса в базе данных сохраняемости удаляется поставщиком сохраняемости, когда заканчивается срок действия блокировки. Другой узел службы рабочего процесса, работающий на том же самом или на другом компьютере фермы серверов, может получить блокировку и загрузить экземпляр службы рабочего процесса в память, чтобы возобновить его выполнение из последнего сохраненного состояния.</span><span class="sxs-lookup"><span data-stu-id="930b5-111">In this scenario, the lock on the workflow service instance in the persistence database is removed by the persistence provider after the lock expires so that another workflow service host running on the same computer or another computer in a server farm can acquire the lock and load the workflow service instance into memory to resume its execution from its last persisted state.</span></span>  
  
 <span data-ttu-id="930b5-112">Если задать этому свойству большее значение, экземпляр службы рабочего процесса будет заблокирован в базе данных сохраняемости на более длительный срок, что задержит восстановление экземпляра из последнего сохраненного состояния.</span><span class="sxs-lookup"><span data-stu-id="930b5-112">Setting a higher value for this property causes the workflow service instances to be locked in the persistence database for a longer time and therefore delays the recovery of the instance from the last persistence point.</span></span> <span data-ttu-id="930b5-113">Если задать в этом свойстве более короткий интервал, новый экземпляр узла службы рабочего процесса быстро получит отказавший экземпляр службы рабочего процесса, но возрастет нагрузка на узел службы рабочего процесса и базу данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="930b5-113">Setting a short interval for this property causes the new instance of the workflow service host to pick up the failed workflow service instance quickly, but causes an increase in workload for the workflow service host and the SQL Server database.</span></span>  
  
 <span data-ttu-id="930b5-114">В хранилище экземпляров рабочих процессов SQL есть внутренняя задача, которая периодически запускается и выявляет экземпляры с истекшей блокировкой.</span><span class="sxs-lookup"><span data-stu-id="930b5-114">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects instances with expired locks on them.</span></span> <span data-ttu-id="930b5-115">Обнаружив такие экземпляры, она помещает их в таблицу RunnableInstances, чтобы узел рабочего процесса мог получить их и запустить.</span><span class="sxs-lookup"><span data-stu-id="930b5-115">When it finds instances with expired locks, it places the instances in the RunnableInstances table so that a workflow host can pick up and run these instances.</span></span>
