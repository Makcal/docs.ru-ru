---
description: 'Узнайте подробнее о: Поддержка международного кода ресурса в System.Uri'
title: Поддержка международного кода ресурса в System.Uri
ms.date: 03/30/2017
ms.assetid: b5e994c3-3535-4aff-8e1b-b69be22e9a22
ms.openlocfilehash: 9aa22a42f45d149b56441e113e3e6cc00512c506
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99801882"
---
# <a name="international-resource-identifier-support-in-systemuri"></a><span data-ttu-id="29b95-103">Поддержка международного кода ресурса в System.Uri</span><span class="sxs-lookup"><span data-stu-id="29b95-103">International Resource Identifier Support in System.Uri</span></span>

<span data-ttu-id="29b95-104">Класс <xref:System.Uri?displayProperty=nameWithType> был расширен за счет поддержки международного идентификатора ресурса (IRI) и международных доменных имен (IDN).</span><span class="sxs-lookup"><span data-stu-id="29b95-104">The <xref:System.Uri?displayProperty=nameWithType> class has been extended with International Resource Identifier (IRI) and Internationalized Domain Names (IDN) support.</span></span> <span data-ttu-id="29b95-105">Эти улучшения доступны в .NET Framework 3.5, 3.0 с пакетом обновления 1 (SP1) и 2.0 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="29b95-105">These enhancements are available in .NET Framework 3.5, 3.0 SP1, and 2.0 SP1.</span></span>  
  
## <a name="iri-and-idn-support"></a><span data-ttu-id="29b95-106">Поддержка IRI и IDN</span><span class="sxs-lookup"><span data-stu-id="29b95-106">IRI and IDN Support</span></span>  

 <span data-ttu-id="29b95-107">Веб-адреса обычно выражаются с помощью унифицированных идентификаторов ресурса (URI), которые состоят из очень ограниченного набора символов:</span><span class="sxs-lookup"><span data-stu-id="29b95-107">Web addresses are typically expressed using Uniform Resource Identifiers (URI) that consist of a very restricted set of characters:</span></span>  
  
- <span data-ttu-id="29b95-108">буквы верхнего и нижнего регистра английского алфавита в кодировке ASCII;</span><span class="sxs-lookup"><span data-stu-id="29b95-108">Upper and lower case ASCII letters from the English alphabet.</span></span>  
  
- <span data-ttu-id="29b95-109">цифры от 0 до 9;</span><span class="sxs-lookup"><span data-stu-id="29b95-109">Digits from 0 to 9.</span></span>  
  
- <span data-ttu-id="29b95-110">небольшое количество других символов ASCII.</span><span class="sxs-lookup"><span data-stu-id="29b95-110">A small number of other ASCII symbols.</span></span>  
  
 <span data-ttu-id="29b95-111">Спецификации URI документально зафиксированы в стандартах RFC 2396 и RFC 3986, опубликованных IETF.</span><span class="sxs-lookup"><span data-stu-id="29b95-111">The specifications for URIs are documented in RFC 2396 and RFC 3986 published by the Internet Engineering Task Force (IETF).</span></span>  
  
 <span data-ttu-id="29b95-112">По мере расширения Интернета потребность в идентификации ресурсов на языках, отличных от английского, становится все более насущной.</span><span class="sxs-lookup"><span data-stu-id="29b95-112">With the growth of the Internet, there is a growing need to identify resources using languages other than English.</span></span> <span data-ttu-id="29b95-113">Идентификаторы, которые способствуют удовлетворению этой потребности и позволяют использовать символы, не принадлежащие к кодировке ASCII (символы из кодировок Unicode/ISO 10646), называются международными кодами ресурсов (IRI).</span><span class="sxs-lookup"><span data-stu-id="29b95-113">Identifiers which facilitate this need and allow non-ASCII characters (characters in the Unicode/ISO 10646 character set) are known as International Resource Identifiers (IRIs).</span></span> <span data-ttu-id="29b95-114">Спецификации IRI документально зафиксированы в стандарте RFC 3987, опубликованном IETF.</span><span class="sxs-lookup"><span data-stu-id="29b95-114">The specifications for IRIs are documented in RFC 3987 published by IETF.</span></span> <span data-ttu-id="29b95-115">Использование IRI позволяет применять в URL символы Юникода.</span><span class="sxs-lookup"><span data-stu-id="29b95-115">Using IRIs allows a URL to contain Unicode characters.</span></span>  
  
 <span data-ttu-id="29b95-116">Существующий класс <xref:System.Uri?displayProperty=nameWithType> был расширен, чтобы обеспечивать поддержку IRI на основе стандарта RFC 3987.</span><span class="sxs-lookup"><span data-stu-id="29b95-116">The existing <xref:System.Uri?displayProperty=nameWithType> class has been extended to provide IRI support based on RFC 3987.</span></span> <span data-ttu-id="29b95-117">Пользователи не увидят никаких функциональных изменений, внесенных после платформы .NET Framework 2.0, пока специально не включат поддержку IRI.</span><span class="sxs-lookup"><span data-stu-id="29b95-117">Current users will not see any change from the .NET Framework 2.0 behavior unless they specifically enable IRI.</span></span> <span data-ttu-id="29b95-118">Это обеспечивает совместимость приложений с предыдущими версиями платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="29b95-118">This ensures application compatibility with prior versions of the .NET Framework.</span></span>  
  
 <span data-ttu-id="29b95-119">Приложение может указать, должен ли применяться синтаксический анализ международных доменных имен (IDN) к доменным именам и должны ли применяться правила синтаксического анализа IRI.</span><span class="sxs-lookup"><span data-stu-id="29b95-119">An application can specify whether to use Internationalized Domain Name (IDN) parsing applied to domain names and whether IRI parsing rules should be applied.</span></span> <span data-ttu-id="29b95-120">Это можно сделать в файле machine.config или в файле app.config.</span><span class="sxs-lookup"><span data-stu-id="29b95-120">This can be done in the machine.config or in the app.config file.</span></span>  
  
 <span data-ttu-id="29b95-121">При включенном IDN метки в Юникоде в доменном имени будут преобразованы в аналоги в кодировке Punicode.</span><span class="sxs-lookup"><span data-stu-id="29b95-121">Enabling IDN will convert all Unicode labels in a domain name to their Punycode equivalents.</span></span> <span data-ttu-id="29b95-122">Имена Punicode содержат только символы ASCII и всегда начинаются с префикса "xn--".</span><span class="sxs-lookup"><span data-stu-id="29b95-122">Punycode names contain only ASCII characters and always start with the xn-- prefix.</span></span> <span data-ttu-id="29b95-123">Это сделано для того, чтобы поддерживать существующие DNS-серверы в интрасети, так как большинство DNS-серверов поддерживает только символы ASCII (см. RFC 3940).</span><span class="sxs-lookup"><span data-stu-id="29b95-123">The reason for this is to support existing DNS servers on the Internet, since most DNS servers only support ASCII characters (see RFC 3940).</span></span>  
  
 <span data-ttu-id="29b95-124">Включение IRI и IDN влияет на значение свойства <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="29b95-124">Enabling IRI and IDN affects the value of the <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="29b95-125">Включение IRI и IDN может также привести к изменению принципа действия методов <xref:System.Uri.Equals%2A?displayProperty=nameWithType>, <xref:System.Uri.OriginalString%2A?displayProperty=nameWithType>, <xref:System.Uri.GetComponents%2A?displayProperty=nameWithType> и <xref:System.Uri.IsWellFormedOriginalString%2A>.</span><span class="sxs-lookup"><span data-stu-id="29b95-125">Enabling IRI and IDN can also change the behavior of the <xref:System.Uri.Equals%2A?displayProperty=nameWithType>, <xref:System.Uri.OriginalString%2A?displayProperty=nameWithType>, <xref:System.Uri.GetComponents%2A?displayProperty=nameWithType>, and <xref:System.Uri.IsWellFormedOriginalString%2A> methods.</span></span>  
  
 <span data-ttu-id="29b95-126">Расширен был также и класс <xref:System.GenericUriParser?displayProperty=nameWithType>, который теперь позволяет создавать настраиваемые средства синтаксического анализа, поддерживающие IRI и IDN.</span><span class="sxs-lookup"><span data-stu-id="29b95-126">The <xref:System.GenericUriParser?displayProperty=nameWithType> class has also been extended to allow creating a customizable parser that supports IRI and IDN.</span></span> <span data-ttu-id="29b95-127">Поведение объекта <xref:System.GenericUriParser?displayProperty=nameWithType> задается путем передачи побитового сочетания значений, доступных в перечислении <xref:System.GenericUriParserOptions?displayProperty=nameWithType>, конструктору <xref:System.GenericUriParser?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="29b95-127">The behavior of a <xref:System.GenericUriParser?displayProperty=nameWithType> object is specified by passing a bitwise combination of the values available in the <xref:System.GenericUriParserOptions?displayProperty=nameWithType> enumeration to the <xref:System.GenericUriParser?displayProperty=nameWithType> constructor.</span></span> <span data-ttu-id="29b95-128">Тип <xref:System.GenericUriParserOptions.IriParsing?displayProperty=nameWithType> указывает на то, что средство синтаксического анализа поддерживает правила анализа, определенные стандартом RFC 3987 для международных кодов ресурсов (IRI).</span><span class="sxs-lookup"><span data-stu-id="29b95-128">The <xref:System.GenericUriParserOptions.IriParsing?displayProperty=nameWithType> type indicates the parser supports the parsing rules specified in RFC 3987 for International Resource Identifiers (IRI).</span></span> <span data-ttu-id="29b95-129">Фактически использование IRI зависит от того, включен ли IRI.</span><span class="sxs-lookup"><span data-stu-id="29b95-129">Whether IRI is actually used depends on if IRI is enabled.</span></span>  
  
 <span data-ttu-id="29b95-130">Тип <xref:System.GenericUriParserOptions.Idn?displayProperty=nameWithType> указывает на то, что средство синтаксического анализа поддерживает анализ международных доменных имен (IDN) узлов.</span><span class="sxs-lookup"><span data-stu-id="29b95-130">The <xref:System.GenericUriParserOptions.Idn?displayProperty=nameWithType> type indicates the parser supports Internationalized Domain Name (IDN) parsing (IDN) of host names.</span></span> <span data-ttu-id="29b95-131">Фактически использование IDN зависит от того, включен ли IDN.</span><span class="sxs-lookup"><span data-stu-id="29b95-131">Whether IDN is actually used depends on if IDN is enabled.</span></span>  
  
 <span data-ttu-id="29b95-132">Синтаксический анализ IRI будет выполнять проверку нормализации и символов в соответствии с последними правилами IRI стандарта RFC 3987.</span><span class="sxs-lookup"><span data-stu-id="29b95-132">Enabling IRI parsing will do normalization and character checking according to the latest IRI rules in RFC 3987.</span></span> <span data-ttu-id="29b95-133">Значение по умолчанию для синтаксического анализа отключается, поэтому нормализация и проверка символов выполняются в соответствии с RFC 2396 и RFC 3986.</span><span class="sxs-lookup"><span data-stu-id="29b95-133">The default value is for IRI parsing to be disabled so normalization and character checking are done according to RFC 2396 and RFC 3986.</span></span>  
  
 <span data-ttu-id="29b95-134">Обработку IRI и IDN в классе <xref:System.Uri?displayProperty=nameWithType> также можно контролировать с помощью классов параметров конфигурации <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> и <xref:System.Configuration.IdnElement?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="29b95-134">IRI and IDN processing in the <xref:System.Uri?displayProperty=nameWithType> class can also be controlled using the <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> and <xref:System.Configuration.IdnElement?displayProperty=nameWithType> configuration setting classes.</span></span> <span data-ttu-id="29b95-135">Параметр <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> включает или отключает обработку IRI в классе <xref:System.Uri?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="29b95-135">The <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> setting enables or disables IRI processing in the <xref:System.Uri?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="29b95-136">Параметр <xref:System.Configuration.IdnElement?displayProperty=nameWithType> включает или отключает обработку IDN в классе <xref:System.Uri>.</span><span class="sxs-lookup"><span data-stu-id="29b95-136">The <xref:System.Configuration.IdnElement?displayProperty=nameWithType> setting enables or disables IDN processing in the <xref:System.Uri> class.</span></span> <span data-ttu-id="29b95-137">Параметр <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> также косвенно управляет IDN.</span><span class="sxs-lookup"><span data-stu-id="29b95-137">The <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> setting also indirectly controls IDN.</span></span> <span data-ttu-id="29b95-138">Обработка IRI должна быть включена для обработки IDN.</span><span class="sxs-lookup"><span data-stu-id="29b95-138">IRI processing must be enabled for IDN processing to be possible.</span></span> <span data-ttu-id="29b95-139">Если IRI-система не включена, то обработка IDN данных будет происходить по умолчанию, когда режим платформы .NET Framework 2.0 является совместимым и имена IDN не используются.</span><span class="sxs-lookup"><span data-stu-id="29b95-139">If IRI processing is disabled, then IDN processing will be set to the default setting where the .NET Framework 2.0 behavior is used for compatibility and IDN names are not used.</span></span>  
  
 <span data-ttu-id="29b95-140">Параметр конфигурации для классов конфигурации <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> и <xref:System.Configuration.IdnElement?displayProperty=nameWithType> будет считан, когда будет создан первый класс <xref:System.Uri?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="29b95-140">The configuration setting for the <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> and <xref:System.Configuration.IdnElement?displayProperty=nameWithType> configuration classes will be read once when the first <xref:System.Uri?displayProperty=nameWithType> class is constructed.</span></span> <span data-ttu-id="29b95-141">Изменения, внесенные в параметры конфигурации после этого, игнорируются.</span><span class="sxs-lookup"><span data-stu-id="29b95-141">Changes to configuration settings after that time are ignored.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="29b95-142">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="29b95-142">See also</span></span>

- <xref:System.Configuration.IdnElement?displayProperty=nameWithType>
- <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType>
- <xref:System.Uri?displayProperty=nameWithType>
- <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType>
