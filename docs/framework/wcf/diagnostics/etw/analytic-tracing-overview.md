---
description: См. Дополнительные сведения о аналитических трассировках
title: Общие сведения об аналитическом отслеживании
ms.date: 03/30/2017
helpviewer_keywords:
- analytic tracing [WCF], overview
ms.assetid: ae55e9cc-0809-442f-921f-d644290ebf15
ms.openlocfilehash: 574236b364ab03afbf3c1f3dc3a63842220e38b0
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99798866"
---
# <a name="analytic-tracing-overview"></a><span data-ttu-id="4e315-103">Обзор аналитической трассировки</span><span class="sxs-lookup"><span data-stu-id="4e315-103">Analytic tracing overview</span></span>

<span data-ttu-id="4e315-104">Аналитическая трассировка платформы [!INCLUDE[netfx_current_long](../../../../../includes/netfx-current-long-md.md)] - это набор высокопроизводительных функций с низкой детализацией, добавляемый к трассировке событий Windows (ETW).</span><span class="sxs-lookup"><span data-stu-id="4e315-104">Analytic tracing in [!INCLUDE[netfx_current_long](../../../../../includes/netfx-current-long-md.md)] is a high performance and low verbosity tracing feature set on top of Event Tracing for Windows (ETW).</span></span> <span data-ttu-id="4e315-105">Трассировка событий Windows работает на уровне ядра, что значительно снижает издержки операций трассировки.</span><span class="sxs-lookup"><span data-stu-id="4e315-105">ETW runs at the kernel-level to greatly reduce the overhead of tracing operations.</span></span> <span data-ttu-id="4e315-106">Она эффективно буферизует события режима пользователя и ядра и позволяет динамически включать ведение журнала, при этом не требуется перезагружать службу.</span><span class="sxs-lookup"><span data-stu-id="4e315-106">It efficiently buffers user- and kernel-mode events, and allows dynamic enabling of logging without requiring service restarts.</span></span> <span data-ttu-id="4e315-107">После их создания и получения данные трассировки отображаются в журналах событий.</span><span class="sxs-lookup"><span data-stu-id="4e315-107">The tracing data is available in the event logs after it has been emitted and received.</span></span>

<span data-ttu-id="4e315-108">Дополнительные сведения о трассировке событий Windows см. [в статье улучшение отладки и настройка производительности с помощью ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span><span class="sxs-lookup"><span data-stu-id="4e315-108">For more information about ETW, see [Improve Debugging and Performance Tuning with ETW](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw).</span></span>

 <span data-ttu-id="4e315-109">Помимо использования системных журналов Windows, безопасности и событий приложений для анализа приложений, в Windows Vista и Windows Server 2008 появились дополнительные журналы в узле верхнего уровня журналы приложений и служб.</span><span class="sxs-lookup"><span data-stu-id="4e315-109">In addition to using the Windows System, Security, and Application event logs to analyze application, Windows Vista and Windows Server 2008 introduced additional logs under the Applications and Services Logs top-level node.</span></span> <span data-ttu-id="4e315-110">Эти новые журналы предназначены для сохранения событий для конкретного приложения или для конкретного компонента, а не глобальных событий, имеющих глобальные последствия для системы (как, например, события в журнале безопасности).</span><span class="sxs-lookup"><span data-stu-id="4e315-110">The purpose of these new logs is to store events for a particular application or specific component instead of global events that have a system-wide impact (such as the type of events that the Security event log might record).</span></span> [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] <span data-ttu-id="4e315-111">объединяет и сопоставляет ведение журнала событий трассировки WCF, журналов сообщений WCF и [!INCLUDE[wf1](../../../../../includes/wf1-md.md)] отслеживания записей в журналах приложений и служб.</span><span class="sxs-lookup"><span data-stu-id="4e315-111">unifies and correlates the logging of WCF Trace Events, WCF Message Logs, and [!INCLUDE[wf1](../../../../../includes/wf1-md.md)] Tracking records to the Applications and Services Logs.</span></span>

<span data-ttu-id="4e315-112">В следующих разделах описываются основные понятия и возможности, применяемые к аналитической трассировке WCF.</span><span class="sxs-lookup"><span data-stu-id="4e315-112">The following sections cover concepts and capabilities that apply to WCF analytic tracing.</span></span>

## <a name="enable-wcf-diagnostics-settings"></a><span data-ttu-id="4e315-113">Включить параметры диагностики WCF</span><span class="sxs-lookup"><span data-stu-id="4e315-113">Enable WCF Diagnostics Settings</span></span>

<span data-ttu-id="4e315-114">Диагностика WCF включается в `<system.serviceModel><diagnostics>` разделе конфигурации.</span><span class="sxs-lookup"><span data-stu-id="4e315-114">WCF diagnostics are enabled within the `<system.serviceModel><diagnostics>` configuration section.</span></span>

```xml
<system.serviceModel>
  <diagnostics>
```

<span data-ttu-id="4e315-115">Параметры диагностики WCF для веб-размещенного виртуального приложения IIS включаются в файл *Web.config* .</span><span class="sxs-lookup"><span data-stu-id="4e315-115">WCF diagnostic settings for a Web-hosted IIS virtual application are enabled in its *Web.config* file.</span></span> <span data-ttu-id="4e315-116">Другой вариант — создать *Web.config* файл в подкаталоге внутри приложения.</span><span class="sxs-lookup"><span data-stu-id="4e315-116">Another option is to create a *Web.config* file in a subdirectory within the application.</span></span> <span data-ttu-id="4e315-117">Этот вариант применяет параметры ко всем службам в подкаталоге.</span><span class="sxs-lookup"><span data-stu-id="4e315-117">This choice applies the settings to all of the services within a subdirectory.</span></span> <span data-ttu-id="4e315-118">Чтобы обеспечить согласованность параметров диагностики для всех служб в приложении, параметры должны находиться в файле *Web.config* в каталоге приложения, а не в одном из отдельных подкаталогов в приложении.</span><span class="sxs-lookup"><span data-stu-id="4e315-118">To ensure that the diagnostics settings are initialized consistently for all services within the application, the settings should be within the *Web.config* file in the application directory and not in one of the individual subdirectories within the application.</span></span>

## <a name="channels"></a><span data-ttu-id="4e315-119">Каналы</span><span class="sxs-lookup"><span data-stu-id="4e315-119">Channels</span></span>

<span data-ttu-id="4e315-120">Приложение ETW позволяет программным компонентам направлять события трассировки определенной аудитории при помощь каналов.</span><span class="sxs-lookup"><span data-stu-id="4e315-120">ETW allows software components to direct tracing events to a particular audience by use of channels.</span></span> <span data-ttu-id="4e315-121">Например, можно отправить события системным администраторам одному каналу и событиям, которые разработчики приложений обращают к другому каналу.</span><span class="sxs-lookup"><span data-stu-id="4e315-121">For example, you can send events for system administrators to one channel and events that application developers care about to another channel.</span></span> <span data-ttu-id="4e315-122">Каналы именуются и регистрируются в Windows, чтобы потребители могли просматривать события канала с помощью Просмотр событий.</span><span class="sxs-lookup"><span data-stu-id="4e315-122">Channels are named and registered with Windows so that consumers can view a channel's events using Event Viewer.</span></span>

 <span data-ttu-id="4e315-123">Функция аналитической трассировки для WCF при [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] записи в канал Microsoft-Windows-Application-Server-Applications.</span><span class="sxs-lookup"><span data-stu-id="4e315-123">The analytic tracing feature for WCF in [!INCLUDE[netfx_current_short](../../../../../includes/netfx-current-short-md.md)] writes to the Microsoft-Windows-Application-Server-Applications channel.</span></span> <span data-ttu-id="4e315-124">Этот канал предназначен для пользователей, желающих отслеживать работоспособность служб WCF в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="4e315-124">This channel is designed for users who want to monitor the health of WCF services in production.</span></span> <span data-ttu-id="4e315-125">Он определяет небольшой набор событий, которые можно использовать во многих сценариях мониторинга работоспособности и устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="4e315-125">It defines a small set of events that can be used in many health monitoring and troubleshooting scenarios.</span></span>

 <span data-ttu-id="4e315-126">Чтобы включить использование файла манифеста средства отслеживания событий для Windows для обеспечения правильной расшифровки сообщений в журнале событий, воспользуйтесь программой командной строки ServiceModelReg следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4e315-126">To enable the Event Tracing for Windows manifest so that messages are decoded properly in the event log, use the ServiceModelReg tool on the command line as follows:</span></span>

 `ServiceModelReg.exe -i -c:etw`

## <a name="dynamic-configuration"></a><span data-ttu-id="4e315-127">Динамическая конфигурация</span><span class="sxs-lookup"><span data-stu-id="4e315-127">Dynamic Configuration</span></span>

<span data-ttu-id="4e315-128">С помощью инфраструктуры ETW трассировку можно включать и настраивать динамически, используя стандартные средства Windows.</span><span class="sxs-lookup"><span data-stu-id="4e315-128">The ETW infrastructure allows tracing to be enabled and configured dynamically using standard Windows tools.</span></span> <span data-ttu-id="4e315-129">Дополнительные сведения см. в разделе [Динамическое включение аналитической трассировки](dynamically-enabling-analytic-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="4e315-129">For more information, see [Dynamically Enabling Analytic Tracing](dynamically-enabling-analytic-tracing.md).</span></span>

## <a name="message-flow-tracing"></a><span data-ttu-id="4e315-130">Трассировка потока сообщений</span><span class="sxs-lookup"><span data-stu-id="4e315-130">Message Flow Tracing</span></span>

<span data-ttu-id="4e315-131">Дополнительные сведения о включении трассировки потока сообщений см. в разделе [Настройка трассировки потока сообщений](configuring-message-flow-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="4e315-131">For more information about how to enable message flow tracing, see [Configuring Message Flow Tracing](configuring-message-flow-tracing.md).</span></span>

## <a name="keywords"></a><span data-ttu-id="4e315-132">Keywords</span><span class="sxs-lookup"><span data-stu-id="4e315-132">Keywords</span></span>

<span data-ttu-id="4e315-133">Ключевые слова используются для фильтрации сообщений трассировки и определения того, какой компонент платформа .NET Framework выдал событие.</span><span class="sxs-lookup"><span data-stu-id="4e315-133">Keywords are used to filter trace messages and define which component of the .NET Framework emitted the event.</span></span> <span data-ttu-id="4e315-134">Дополнительные сведения см. в разделе [Динамическое включение аналитической трассировки](dynamically-enabling-analytic-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="4e315-134">For more information, see [Dynamically Enabling Analytic Tracing](dynamically-enabling-analytic-tracing.md).</span></span>
