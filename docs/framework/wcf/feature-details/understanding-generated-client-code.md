---
description: 'Дополнительные сведения: основные сведения о созданном коде клиента'
title: Основные сведения о созданном коде клиента
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c3f6e4b0-1131-4c94-aa39-a197c5c2f2ca
ms.openlocfilehash: c95f02a257cd9417b94190c82fe426a1550f1bf0
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99732960"
---
# <a name="understanding-generated-client-code"></a><span data-ttu-id="9a4b2-103">Основные сведения о созданном коде клиента</span><span class="sxs-lookup"><span data-stu-id="9a4b2-103">Understanding Generated Client Code</span></span>

<span data-ttu-id="9a4b2-104">[ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) создает код клиента и файл конфигурации клиентского приложения для использования при сборке клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-104">The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) generates client code and a client application configuration file for use in building client applications.</span></span> <span data-ttu-id="9a4b2-105">В этом разделе содержатся примеры созданного кода для стандартных сценариев контрактов служб.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-105">This topic provides a tour of generated code examples for standard service contract scenarios.</span></span> <span data-ttu-id="9a4b2-106">Дополнительные сведения о создании клиентского приложения с помощью созданного кода см. в разделе [Общие сведения о клиенте WCF](../wcf-client-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-106">For more information about building a client application using the generated code, see [WCF Client Overview](../wcf-client-overview.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="9a4b2-107">Обзор</span><span class="sxs-lookup"><span data-stu-id="9a4b2-107">Overview</span></span>  

 <span data-ttu-id="9a4b2-108">Если вы используете Visual Studio для создания типов клиентов Windows Communication Foundation (WCF) для проекта, обычно не нужно изучать созданный код клиента.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-108">If you use Visual Studio to generate Windows Communication Foundation (WCF) client types for your project, you typically do not need to examine the generated client code.</span></span> <span data-ttu-id="9a4b2-109">Если используемая среда разработки не выполняет аналогичные службы, для создания кода клиента, а также для последующего использования этого кода для разработки клиентского приложения можно использовать такое средство, как Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-109">If you are not using a development environment that performs the same services for you, you can use a tool such as Svcutil.exe to generate client code and then use that code to develop your client application.</span></span>  
  
 <span data-ttu-id="9a4b2-110">Поскольку Svcutil.exe имеет несколько параметров, способных изменить тип созданной информации, данный раздел не рассматривает все сценарии.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-110">Because Svcutil.exe has a number of options that modify the generated type information, this topic does not discuss all scenarios.</span></span> <span data-ttu-id="9a4b2-111">Тем не менее, поиск созданного кода включен в следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="9a4b2-111">However, the following standard tasks involve locating generated code:</span></span>  
  
- <span data-ttu-id="9a4b2-112">Определение интерфейсов контрактов служб.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-112">Identifying service contract interfaces.</span></span>  
  
- <span data-ttu-id="9a4b2-113">Определение класса клиента WCF.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-113">Identifying the WCF client class.</span></span>  
  
- <span data-ttu-id="9a4b2-114">Определение типа данных.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-114">Identifying data types.</span></span>  
  
- <span data-ttu-id="9a4b2-115">Определение контрактов обратного вызова для дуплексных служб.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-115">Identifying callback contracts for duplex services.</span></span>  
  
- <span data-ttu-id="9a4b2-116">Определение интерфейса канала контракта службы поддержки.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-116">Identifying the helper service contract channel interface.</span></span>  
  
### <a name="finding-service-contract-interfaces"></a><span data-ttu-id="9a4b2-117">Поиск интерфейсов контрактов служб</span><span class="sxs-lookup"><span data-stu-id="9a4b2-117">Finding Service Contract Interfaces</span></span>  

 <span data-ttu-id="9a4b2-118">Чтобы найти интерфейсы, которые моделируют контракты служб, необходимо искать интерфейсы, отмеченные атрибутом <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="9a4b2-118">To locate the interfaces that model service contracts, search for interfaces that are marked with the <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="9a4b2-119">Зачастую этот атрибут сложно найти при быстром прочтении из-за наличия других атрибутов и явных свойств, установленных на сам атрибут.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-119">Often this attribute can be difficult to locate with a quick read due to the presence of other attributes and the explicit properties set on the attribute itself.</span></span> <span data-ttu-id="9a4b2-120">Не следует забывать, что интерфейс контракта службы и интерфейс контракта клиента - это разные типы интерфейса.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-120">Remember that the service contract interface and the client contract interface are two different types.</span></span> <span data-ttu-id="9a4b2-121">В следующем примере кода показан исходный контракт службы.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-121">The following code example shows the original service contract.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#22](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#22)]  
  
 <span data-ttu-id="9a4b2-122">В следующем примере кода показан тот же контракт службы, созданный Svcutil.exe.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-122">The following code example shows the same service contract as generated by Svcutil.exe.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#12)]  
  
 <span data-ttu-id="9a4b2-123">Вы можете использовать созданный интерфейс контракта службы вместе с <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType> классом для создания объекта канала WCF, с помощью которого будут вызываться операции службы.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-123">You can use the generated service contract interface along with the <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType> class to create a WCF channel object with which to invoke service operations.</span></span> <span data-ttu-id="9a4b2-124">Дополнительные сведения см. [в разделе инструкции. Использование ChannelFactory](how-to-use-the-channelfactory.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-124">For more information, see [How to: Use the ChannelFactory](how-to-use-the-channelfactory.md).</span></span>  
  
### <a name="finding-wcf-client-classes"></a><span data-ttu-id="9a4b2-125">Поиск классов клиента WCF</span><span class="sxs-lookup"><span data-stu-id="9a4b2-125">Finding WCF Client Classes</span></span>  

 <span data-ttu-id="9a4b2-126">Чтобы найти клиентский класс WCF, реализующий контракт службы, который вы хотите использовать, найдите расширение <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> , где параметр типа — это интерфейс контракта службы, который вы ранее находили и расширяет этот интерфейс.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-126">To locate the WCF client class that implements the service contract you want to use, search for an extension of <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>, where the type parameter is the service contract interface that you previously located and that extends that interface.</span></span> <span data-ttu-id="9a4b2-127">Следующий пример кода иллюстрирует класс <xref:System.ServiceModel.ClientBase%601> типа `ISampleService`.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-127">The following code example shows the <xref:System.ServiceModel.ClientBase%601> class of type `ISampleService`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#14)]  
  
 <span data-ttu-id="9a4b2-128">Этот клиентский класс WCF можно использовать, создав новый экземпляр и вызывая методы, которые он реализует.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-128">You can use this WCF client class by creating a new instance of it and calling the methods it implements.</span></span> <span data-ttu-id="9a4b2-129">Эти методы вызывают операцию службы, для взаимодействия с которой они разработаны и сконфигурированы.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-129">Those methods invoke the service operation with which it is designed and configured to interact.</span></span> <span data-ttu-id="9a4b2-130">Дополнительные сведения см. в разделе [Общие сведения о клиенте WCF](../wcf-client-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-130">For more information, see [WCF Client Overview](../wcf-client-overview.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9a4b2-131">При создании средством SvcUtil.exe класса клиента WCF к классу клиента добавляется <xref:System.Diagnostics.DebuggerStepThroughAttribute> для предотвращения пошагового перебора элементов класса клиента WCF отладчиками.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-131">When SvcUtil.exe generates a WCF client class, it adds a <xref:System.Diagnostics.DebuggerStepThroughAttribute> to the client class that prevents debuggers from stepping through the WCF client class.</span></span>  
  
### <a name="finding-data-types"></a><span data-ttu-id="9a4b2-132">Поиск типа данных</span><span class="sxs-lookup"><span data-stu-id="9a4b2-132">Finding Data Types</span></span>  

 <span data-ttu-id="9a4b2-133">Основным способом поиска данных в созданном коде является идентификация имени типа, заданного в контракте, и поиск в коде объявления этого типа.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-133">To locate data types in the generated code, the most basic mechanism is to identify the type name specified in a contract and search the code for that type declaration.</span></span> <span data-ttu-id="9a4b2-134">Например, следующий контракт задает, что метод `SampleMethod` может возвращать ошибку SOAP типа `microsoft.wcf.documentation.SampleFault`.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-134">For example, the following contract specifies that the `SampleMethod` can return a SOAP fault of type `microsoft.wcf.documentation.SampleFault`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#11)]  
  
 <span data-ttu-id="9a4b2-135">Поиск `SampleFault` определяет местонахождение следующего объявления типа.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-135">Searching for `SampleFault` locates the following type declaration.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#30](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#30)]  
  
 <span data-ttu-id="9a4b2-136">В этом случае тип данных представляет собой тип сведений, вызванный конкретным исключением со стороны клиента <xref:System.ServiceModel.FaultException%601> , где параметром типа сведений является `microsoft.wcf.documentation.SampleFault`.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-136">In this case the data type is the detail type thrown by a specific exception on the client, a <xref:System.ServiceModel.FaultException%601> where the detail type parameter is `microsoft.wcf.documentation.SampleFault`.</span></span> <span data-ttu-id="9a4b2-137">Дополнительные сведения о типах данных см. [в разделе указание передача данных в контрактах служб](specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-137">For more information about data types, see [Specifying Data Transfer in Service Contracts](specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="9a4b2-138">Дополнительные сведения об обработке исключений в клиентах см. в разделе [Отправка и получение ошибок](../sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-138">For more information about handling exceptions in clients, see [Sending and Receiving Faults](../sending-and-receiving-faults.md).</span></span>  
  
### <a name="finding-callback-contracts-for-duplex-services"></a><span data-ttu-id="9a4b2-139">Поиск контрактов обратного вызова для дуплексных служб</span><span class="sxs-lookup"><span data-stu-id="9a4b2-139">Finding Callback Contracts for Duplex Services</span></span>  

 <span data-ttu-id="9a4b2-140">Если определяется местоположение контракта службы, для которого интерфейс контракта задает значение свойства <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A?displayProperty=nameWithType> , то этот контракт задает дуплексный контракт.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-140">If you locate a service contract for which the contract interface specifies a value for the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A?displayProperty=nameWithType> property, then that contract specifies a duplex contract.</span></span> <span data-ttu-id="9a4b2-141">Дуплексные контракты требуют, чтобы клиентское приложение создавало класс обратного вызова, реализующий контракт обратного вызова, и передавало экземпляр этого класса в <xref:System.ServiceModel.DuplexClientBase%601?displayProperty=nameWithType> или <xref:System.ServiceModel.DuplexChannelFactory%601?displayProperty=nameWithType> , которые используются для общения со службой.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-141">Duplex contracts require the client application to create a callback class that implements the callback contract and pass an instance of that class to the <xref:System.ServiceModel.DuplexClientBase%601?displayProperty=nameWithType> or <xref:System.ServiceModel.DuplexChannelFactory%601?displayProperty=nameWithType> used to communicate with the service.</span></span> <span data-ttu-id="9a4b2-142">Дополнительные сведения о дуплексных клиентах см. [в разделе руководство. доступ к службам с помощью дуплексного контракта](how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="9a4b2-142">For more information about duplex clients, see [How to: Access Services with a Duplex Contract](how-to-access-services-with-a-duplex-contract.md).</span></span>  
  
 <span data-ttu-id="9a4b2-143">Следующий контракт задает контракт обратного вызова типа `SampleDuplexHelloCallback`.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-143">The following contract specifies a callback contract of type `SampleDuplexHelloCallback`.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/duplexproxycode.cs#2)]
 [!code-vb[C_GeneratedCodeFiles#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_generatedcodefiles/vb/duplexproxycode.vb#2)]  
  
 <span data-ttu-id="9a4b2-144">Поиск этого контракта обратного вызова определяет местоположение следующего интерфейса, который должен быть реализован в клиентском приложении.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-144">Searching for that callback contract locates the following interface that the client application must implement.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/duplexproxycode.cs#4)]
 [!code-vb[C_GeneratedCodeFiles#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_generatedcodefiles/vb/duplexproxycode.vb#4)]  
  
### <a name="finding-service-contract-channel-interfaces"></a><span data-ttu-id="9a4b2-145">Поиск интерфейсов каналов контрактов служб</span><span class="sxs-lookup"><span data-stu-id="9a4b2-145">Finding Service Contract Channel Interfaces</span></span>  

 <span data-ttu-id="9a4b2-146">При использовании класса <xref:System.ServiceModel.ChannelFactory> с интерфейсом контракта службы следует перейти к интерфейсу <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> , чтобы явно открыть, закрыть канал или прервать его работу.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-146">When using the <xref:System.ServiceModel.ChannelFactory> class with a service contract interface, you must cast to the <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> interface to explicitly open, close, or abort the channel.</span></span> <span data-ttu-id="9a4b2-147">Для упрощения работы средство Svcutil.exe создает также вспомогательный интерфейс, реализующий и интерфейс контракта службы, и интерфейс <xref:System.ServiceModel.IClientChannel> , чтобы можно было взаимодействовать с инфраструктурой клиентских каналов без переходов.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-147">To make it easier to work with, the Svcutil.exe tool also generates a helper interface that implements both the service contract interface and <xref:System.ServiceModel.IClientChannel> to enable you to interact with the client channel infrastructure without having to cast.</span></span> <span data-ttu-id="9a4b2-148">В следующем коде показано определение вспомогательного клиентского канала, который реализует указанный выше контракт службы.</span><span class="sxs-lookup"><span data-stu-id="9a4b2-148">The following code shows the definition of a helper client channel that implements the preceding service contract.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#13)]  
  
## <a name="see-also"></a><span data-ttu-id="9a4b2-149">См. также</span><span class="sxs-lookup"><span data-stu-id="9a4b2-149">See also</span></span>

- [<span data-ttu-id="9a4b2-150">Общие сведения о клиентах WCF</span><span class="sxs-lookup"><span data-stu-id="9a4b2-150">WCF Client Overview</span></span>](../wcf-client-overview.md)
