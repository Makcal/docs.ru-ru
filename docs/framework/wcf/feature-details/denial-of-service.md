---
description: 'Дополнительные сведения: отказ в обслуживании'
title: Отказ в обслуживании
ms.date: 03/30/2017
helpviewer_keywords:
- denial of service [WCF]
ms.assetid: dfb150f3-d598-4697-a5e6-6779e4f9b600
ms.openlocfilehash: 1f1b40f717453f3e55bedc48aa00ead31adb8725
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99756478"
---
# <a name="denial-of-service"></a><span data-ttu-id="e5f5e-103">Отказ в обслуживании</span><span class="sxs-lookup"><span data-stu-id="e5f5e-103">Denial of Service</span></span>

<span data-ttu-id="e5f5e-104">Если система перегружена так, что не удается обрабатывать сообщения, или сообщения обрабатываются слишком медленно, происходит отказ в обслуживании.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-104">Denial of service occurs when a system is overwhelmed in such a way that messages cannot be processed, or they are processed extremely slowly.</span></span>  
  
## <a name="excess-memory-consumption"></a><span data-ttu-id="e5f5e-105">Чрезмерный расход памяти</span><span class="sxs-lookup"><span data-stu-id="e5f5e-105">Excess Memory Consumption</span></span>  

 <span data-ttu-id="e5f5e-106">Проблема может возникнуть при прочтении XML-документа с большим количеством уникальных локальных имен, пространств имен или префиксов.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-106">A problem can occur when reading an XML document with a large number of unique local names, namespaces, or prefixes.</span></span> <span data-ttu-id="e5f5e-107">При использовании класса, который наследуется от <xref:System.Xml.XmlReader>, и вызове свойства <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> или <xref:System.Xml.XmlReader.NamespaceURI%2A> для каждого элемента, возвращаемая строка добавляется в таблицу <xref:System.Xml.NameTable>.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-107">If you are using a class that derives from <xref:System.Xml.XmlReader>, and you call either the <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> or <xref:System.Xml.XmlReader.NamespaceURI%2A> property for each item, the returned string is added to a <xref:System.Xml.NameTable>.</span></span> <span data-ttu-id="e5f5e-108">Коллекция, содержащаяся в таблице <xref:System.Xml.NameTable>, никогда не уменьшается в размерах, что создает виртуальную «утечку памяти» в дескрипторах строк.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-108">The collection held by the <xref:System.Xml.NameTable> never decreases in size, creating a virtual "memory leak" of the string handles.</span></span>  
  
 <span data-ttu-id="e5f5e-109">Возможные способы устранения рисков</span><span class="sxs-lookup"><span data-stu-id="e5f5e-109">Mitigations include:</span></span>  
  
- <span data-ttu-id="e5f5e-110">Создайте класс, производный от <xref:System.Xml.NameTable>, и включите максимальную квоту по размеру.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-110">Derive from the <xref:System.Xml.NameTable> class and enforce a maximum size quota.</span></span> <span data-ttu-id="e5f5e-111">(Не существует способов предотвратить использование таблицы <xref:System.Xml.NameTable> или сменить таблицу <xref:System.Xml.NameTable> при ее заполнении.)</span><span class="sxs-lookup"><span data-stu-id="e5f5e-111">(You cannot prevent the use of a <xref:System.Xml.NameTable> or switch the <xref:System.Xml.NameTable> when it is full.)</span></span>  
  
- <span data-ttu-id="e5f5e-112">Не используйте упомянутые свойства, а использовать вместо них, если возможно, используйте метод <xref:System.Xml.XmlReader.MoveToAttribute%2A> вместе с методом <xref:System.Xml.XmlReader.IsStartElement%2A>; эти методы не возвращают строк и поэтому не возникает переполнение коллекции <xref:System.Xml.NameTable>.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-112">Avoid using the properties mentioned and instead use the <xref:System.Xml.XmlReader.MoveToAttribute%2A> method with the <xref:System.Xml.XmlReader.IsStartElement%2A> method where possible; those methods do not return strings and thus avoid the problem of overfilling the <xref:System.Xml.NameTable> collection.</span></span>  
  
## <a name="malicious-client-sends-excessive-license-requests-to-service"></a><span data-ttu-id="e5f5e-113">Вредоносный клиент отправляет службе слишком много запросов лицензий</span><span class="sxs-lookup"><span data-stu-id="e5f5e-113">Malicious Client Sends Excessive License Requests to Service</span></span>  

 <span data-ttu-id="e5f5e-114">Если вредоносный клиент направляет службе слишком много запросов лицензий, это может привести к излишнему использованию памяти на сервере.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-114">If a malicious client bombards a service with excessive license requests, it can cause the server to use excessive memory.</span></span>  
  
 <span data-ttu-id="e5f5e-115">Устранение рисков. Используйте следующие свойства класса <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings>:</span><span class="sxs-lookup"><span data-stu-id="e5f5e-115">Mitigation: Use the following properties of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> class:</span></span>  
  
- <span data-ttu-id="e5f5e-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: определяет максимальное число привязанных ко времени объектов `SecurityContextToken`, которые сервер кэширует после согласования `SPNego` или `SSL`;</span><span class="sxs-lookup"><span data-stu-id="e5f5e-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controls the maximum number of time-bounded `SecurityContextToken`s that the server caches after `SPNego` or `SSL` negotiation.</span></span>  
  
- <span data-ttu-id="e5f5e-117"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: определяет время существования объектов `SecurityContextTokens`, выдаваемых сервером после согласования `SPNego` и `SSL`.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-117"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controls the lifetime of the `SecurityContextTokens` that the server issues following `SPNego` or `SSL` negotiation.</span></span> <span data-ttu-id="e5f5e-118">Сервер кэширует объекты `SecurityContextToken` на данный промежуток времени.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-118">The server caches the `SecurityContextToken`s for this period of time.</span></span>  
  
- <span data-ttu-id="e5f5e-119"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A> управляет максимальным числом безопасных диалогов, установленных на сервере, но для которых ни одно сообщение приложения не было обработано.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-119"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.</span></span> <span data-ttu-id="e5f5e-120">Данная квота препятствует установлению клиентами безопасных диалогов в службе; таким образом, служба должна отслеживать состояние каждого из клиентов, но не использовать их.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-120">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
- <span data-ttu-id="e5f5e-121"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>: определяет максимальный срок, в течение которого служба поддерживает безопасный диалог, не получая сообщений приложения от клиента.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-121"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>:  controls the maximum time the service keeps a secure conversation alive without receiving an application message from the client for the conversation.</span></span> <span data-ttu-id="e5f5e-122">Данная квота препятствует установлению клиентами безопасных диалогов в службе; таким образом, служба должна отслеживать состояние каждого из клиентов, но не использовать их.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-122">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
## <a name="wsdualhttpbinding-or-dual-custom-bindings-require-client-authentication"></a><span data-ttu-id="e5f5e-123">Привязки WSDualHttpBinding и Dual Custom Bindings требуют проверки подлинности клиента</span><span class="sxs-lookup"><span data-stu-id="e5f5e-123">WSDualHttpBinding or Dual Custom Bindings Require Client Authentication</span></span>  

 <span data-ttu-id="e5f5e-124">По умолчанию для привязки <xref:System.ServiceModel.WSDualHttpBinding> включен режим безопасности.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-124">By default, the <xref:System.ServiceModel.WSDualHttpBinding> has security enabled.</span></span> <span data-ttu-id="e5f5e-125">Однако существует возможность, что при отключении проверки подлинности клиента путем задания для свойства <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> значения <xref:System.ServiceModel.MessageCredentialType.None> злоумышленник сможет вызвать атаку типа «отказ в обслуживании» на третьей службе.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-125">It is possible, however, that if the client authentication is disabled by setting the <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> property to <xref:System.ServiceModel.MessageCredentialType.None>, a malicious user can cause a denial of service attack on a third service.</span></span> <span data-ttu-id="e5f5e-126">Это может произойти потому, что вредоносный клиент «заставит» службу отправить поток сообщений третьей службе.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-126">This can occur because a malicious client can direct the service to send a stream of messages to a third service.</span></span>  
  
 <span data-ttu-id="e5f5e-127">Чтобы избежать этого, не присваивайте данному свойству значение `None`.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-127">To mitigate this, do not set the property to `None`.</span></span> <span data-ttu-id="e5f5e-128">Кроме того, помните о такой угрозе при создании пользовательской привязки, использующей шаблон двустороннего обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-128">Also be aware of this possibility when creating a custom binding that has a dual message pattern.</span></span>  
  
## <a name="auditing-event-log-can-be-filled"></a><span data-ttu-id="e5f5e-129">Возможно переполнение журнала событий аудита</span><span class="sxs-lookup"><span data-stu-id="e5f5e-129">Auditing Event Log Can Be Filled</span></span>  

 <span data-ttu-id="e5f5e-130">Если злоумышленник знает о том, что включен аудит, он может отправлять недопустимые сообщения, приводящие к внесению записей аудита в журнал.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-130">If a malicious user understands that auditing is enabled, that attacker can send invalid messages that cause audit entries to be written.</span></span> <span data-ttu-id="e5f5e-131">Если это приводит к заполнению журнала аудита, система аудита дает сбой.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-131">If the audit log is filled in this manner, the auditing system fails.</span></span>  
  
 <span data-ttu-id="e5f5e-132">Для решения этой проблемы задайте свойству <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> значение `true` и используйте свойства средства «Просмотр событий» для управления поведением аудита.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-132">To mitigate this, set the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> property to `true` and use the properties of the Event Viewer to control the auditing behavior.</span></span> <span data-ttu-id="e5f5e-133">Дополнительные сведения об использовании Просмотр событий для просмотра журналов событий и управления ими см. в разделе [Просмотр событий](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc766042(v=ws.11)).</span><span class="sxs-lookup"><span data-stu-id="e5f5e-133">For more information about using the Event Viewer to view and manage event logs, see [Event Viewer](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc766042(v=ws.11)).</span></span> <span data-ttu-id="e5f5e-134">Дополнительные сведения см. в разделе [Audit](auditing-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="e5f5e-134">For more information, see [Auditing](auditing-security-events.md).</span></span>  
  
## <a name="invalid-implementations-of-iauthorizationpolicy-can-cause-service-to-become-unresponsive"></a><span data-ttu-id="e5f5e-135">Недопустимые реализации IAuthorizationPolicy могут привести к тому, что служба перестанет отвечать на запросы</span><span class="sxs-lookup"><span data-stu-id="e5f5e-135">Invalid Implementations of IAuthorizationPolicy Can Cause Service to Become Unresponsive</span></span>  

 <span data-ttu-id="e5f5e-136">Вызов <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> метода для неисправной реализации <xref:System.IdentityModel.Policy.IAuthorizationPolicy> интерфейса может привести к тому, что служба перестанет отвечать на запросы.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-136">Calling the <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> method on a faulty implementation of the <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface can cause the service to become unresponsive.</span></span>  
  
 <span data-ttu-id="e5f5e-137">Устранение рисков. Используйте только надежный код.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-137">Mitigation: Use only trusted code.</span></span> <span data-ttu-id="e5f5e-138">Это значит, следует использовать только тот код, который вы написали и испытали сами, или код от надежного поставщика.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-138">That is, use only code that you have written and tested, or that comes from a trusted provider.</span></span> <span data-ttu-id="e5f5e-139">Не следует разрешать подключение к коду ненадежных расширений <xref:System.IdentityModel.Policy.IAuthorizationPolicy> без их тщательной проверки.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-139">Do not allow untrusted extensions of <xref:System.IdentityModel.Policy.IAuthorizationPolicy> to be plugged into your code without due consideration.</span></span> <span data-ttu-id="e5f5e-140">Это относится ко всем расширениям, используемым при реализации службы.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-140">This applies to all extensions used in a service implementation.</span></span> <span data-ttu-id="e5f5e-141">WCF не делает различий между кодом приложения и внешним кодом, подключенным с помощью точек расширения.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-141">WCF does not make any distinction between application code and foreign code that is plugged in using extensibility points.</span></span>  
  
## <a name="kerberos-maximum-token-size-may-need-resizing"></a><span data-ttu-id="e5f5e-142">Может потребоваться изменить максимальный размер маркера Kerberos</span><span class="sxs-lookup"><span data-stu-id="e5f5e-142">Kerberos Maximum Token Size May Need Resizing</span></span>  

 <span data-ttu-id="e5f5e-143">Если клиент принадлежит к большому числу групп (примерно 900, хотя реальное число может быть другим в зависимости от конкретных групп), может возникнуть проблема, если размер блока заголовка сообщения будет превышать 64 килобайта.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-143">If a client belongs to a large number of groups (approximately 900, although the actual number varies depending on the groups), a problem may occur when a message header's block exceeds 64 kilobytes.</span></span> <span data-ttu-id="e5f5e-144">В этом случае можно увеличить максимальный размер маркера Kerberos.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-144">In that case, you can increase the maximum Kerberos token size.</span></span> <span data-ttu-id="e5f5e-145">Также может потребоваться увеличить максимальный размер сообщения WCF для размещения маркера Kerberos большего размера.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-145">You may also need to increase the maximum WCF message size to accommodate the larger Kerberos token.</span></span>  
  
## <a name="autoenrollment-results-in-multiple-certificates-with-same-subject-name-for-machine"></a><span data-ttu-id="e5f5e-146">Результаты авторегистрации в нескольких сертификатах с одним именем субъекта для компьютера</span><span class="sxs-lookup"><span data-stu-id="e5f5e-146">Autoenrollment Results in Multiple Certificates with Same Subject Name for Machine</span></span>  

 <span data-ttu-id="e5f5e-147">Автоматическая *Регистрация* — это функция Windows Server 2003 для автоматической регистрации пользователей и компьютеров для сертификатов.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-147">*Autoenrollment* is the capability of Windows Server 2003 to automatically enroll users and computers for certificates.</span></span> <span data-ttu-id="e5f5e-148">Если компьютер входит в домен, в котором включена эта возможность, сертификат X.509, соответствующий цели проверки подлинности клиента, автоматически создается и вставляется в хранилище личных сертификатов локального компьютера, как только компьютер подключается к сети.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-148">When a machine is on a domain with the feature enabled, an X.509 certificate with the intended purpose of client authentication is automatically created and inserted into the local computer's Personal certificates store whenever a new machine is joined to the network.</span></span> <span data-ttu-id="e5f5e-149">Однако при авторегистрации одно и то же имя субъекта используется для всех сертификатов, которые создаются в кэше.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-149">However, autoenrollment uses the same subject name for all certificates it creates in the cache.</span></span>  
  
 <span data-ttu-id="e5f5e-150">Это влияет на то, что службы WCF могут не открываться в доменах с автоматической регистрацией.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-150">The impact is that WCF services may fail to open on domains with autoenrollment.</span></span> <span data-ttu-id="e5f5e-151">Это связано с тем, что условия поиска учетных данных X.509 службы по умолчанию могут быть достаточно сложными, поскольку имеется несколько сертификатов с полным DNS-именем компьютера.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-151">This occurs because the default service X.509 credential search criteria might be ambiguous because multiple certificates with the machine's fully qualified Domain Name System (DNS) name exist.</span></span> <span data-ttu-id="e5f5e-152">Один сертификат связан с авторегистрацией, а другой сертификат может быть выданным самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-152">One certificate originates from autoenrollment; the other might be a self-issued certificate.</span></span>  
  
 <span data-ttu-id="e5f5e-153">Чтобы устранить эту проблемы, сослаться на точный сертификат для использования с более точным условием поиска в [\<serviceCredentials>](../../configure-apps/file-schema/wcf/servicecredentials.md) .</span><span class="sxs-lookup"><span data-stu-id="e5f5e-153">To mitigate this, reference the exact certificate to use by using a more precise search criterion on the [\<serviceCredentials>](../../configure-apps/file-schema/wcf/servicecredentials.md).</span></span> <span data-ttu-id="e5f5e-154">Например, используйте параметр <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> и задавайте сертификат по его уникальному отпечатку (хэшу).</span><span class="sxs-lookup"><span data-stu-id="e5f5e-154">For example, use the <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> option, and specify the certificate by its unique thumbprint (hash).</span></span>  
  
 <span data-ttu-id="e5f5e-155">Дополнительные сведения о функции автоматической подачи заявок см. в статье [Автоматическая регистрация сертификатов в Windows Server 2003](/previous-versions/windows/it-pro/windows-server-2003/cc778954(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="e5f5e-155">For more information about the autoenrollment feature, see [Certificate Autoenrollment in Windows Server 2003](/previous-versions/windows/it-pro/windows-server-2003/cc778954(v=ws.10)).</span></span>  
  
## <a name="last-of-multiple-alternative-subject-names-used-for-authorization"></a><span data-ttu-id="e5f5e-156">Последнее из нескольких альтернативных имен субъекта, используемое для авторизации</span><span class="sxs-lookup"><span data-stu-id="e5f5e-156">Last of Multiple Alternative Subject Names Used for Authorization</span></span>  

 <span data-ttu-id="e5f5e-157">В редком случае, когда сертификат X.509 содержит несколько альтернативных имен субъектов, и авторизация выполняется с использованием альтернативного имени субъекта, авторизация может завершиться сбоем.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-157">In the rare case when an X.509 certificate contains multiple alternative subject names, and you authorize using the alternative subject name, authorization may fail.</span></span>  
  
## <a name="protect-configuration-files-with-acls"></a><span data-ttu-id="e5f5e-158">Защита файлов конфигурации с помощью списков управления доступом</span><span class="sxs-lookup"><span data-stu-id="e5f5e-158">Protect Configuration Files with ACLs</span></span>  

 <span data-ttu-id="e5f5e-159">В файлах кода и конфигурации для маркеров, выпущенных CardSpace, можно указать обязательные и необязательные утверждения.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-159">You can specify required and optional claims in code and configuration files for CardSpace issued tokens.</span></span> <span data-ttu-id="e5f5e-160">В результате в сообщениях `RequestSecurityToken`, отправляемых в службу маркеров безопасности, будут создаваться соответствующие элементы.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-160">This results in corresponding elements being emitted in `RequestSecurityToken` messages that are sent to the security token service.</span></span> <span data-ttu-id="e5f5e-161">Злоумышленник может изменить код или файл конфигурации, удалив обязательные или необязательные утверждения, в результате чего возникнет вероятность того, что служба маркеров безопасности выдаст маркер, который запрещает доступ к целевой службе.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-161">An attacker can modify code or configuration to remove required or optional claims, potentially getting the security token service to issue a token that does not allow access to the target service.</span></span>  
  
 <span data-ttu-id="e5f5e-162">Предотвращение. Проверяйте разрешение на доступ к компьютеру для изменения файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-162">To mitigate: Require access to the computer to modify the configuration file.</span></span> <span data-ttu-id="e5f5e-163">Используйте списки управления доступом к файлам (ACL) для защиты файлов конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-163">Use file access control lists (ACLs) to secure configuration files.</span></span> <span data-ttu-id="e5f5e-164">WCF требует, чтобы код был в каталоге приложения или в глобальном кэше сборок, прежде чем он позволит загрузить такой код из конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-164">WCF requires that code be in the application directory or the global assembly cache before it will allow such code to be loaded from configuration.</span></span> <span data-ttu-id="e5f5e-165">Для обеспечения защиты каталогов используйте списки управления доступом к каталогам.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-165">Use directory ACLs to secure directories.</span></span>  
  
## <a name="maximum-number-of-secure-sessions-for-a-service-is-reached"></a><span data-ttu-id="e5f5e-166">Достигнуто максимальное число безопасных сеансов для службы</span><span class="sxs-lookup"><span data-stu-id="e5f5e-166">Maximum Number of Secure Sessions for a Service Is Reached</span></span>  

 <span data-ttu-id="e5f5e-167">Когда клиент успешно проходит проверку подлинности на стороне службы и устанавливается безопасный сеанс для службы, служба отслеживает этот сеанс, пока клиент не отменит его, или пока срок действия сеанса не истечет.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-167">When a client is successfully authenticated by a service and a secure session is established with the service, the service keeps track of the session until the client cancels it or the session expires.</span></span> <span data-ttu-id="e5f5e-168">Каждый установленный сеанс учитывается службой относительно максимального числа одновременных активных сеансов.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-168">Every established session counts against the limit for the maximum number of active simultaneous sessions with a service.</span></span> <span data-ttu-id="e5f5e-169">Когда будет достигнут этот предел, клиенты, пытающие создать сеансы для связи с этой службой, будут отклоняться, пока один или несколько активных сеансов не истекут или не будут отменены клиентом.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-169">When this limit is reached, clients that attempt to create a new session with that service are rejected until one or more active sessions expire or are canceled by a client.</span></span> <span data-ttu-id="e5f5e-170">У клиента может быть установлено несколько сеансов связи со службой, и все они учитываются при сравнении с предельным значением.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-170">A client can have multiple sessions with a service, and each one of those sessions counts toward the limit.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e5f5e-171">При использовании сеансов с отслеживанием состояния предыдущий абзац неприменим.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-171">When you use stateful sessions, the previous paragraph does not apply.</span></span> <span data-ttu-id="e5f5e-172">Дополнительные сведения о сеансах с отслеживанием состояния см. [в разделе инструкции. Создание маркера контекста безопасности для безопасного сеанса](how-to-create-a-security-context-token-for-a-secure-session.md).</span><span class="sxs-lookup"><span data-stu-id="e5f5e-172">For more information about stateful sessions, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
 <span data-ttu-id="e5f5e-173">Чтобы избежать этого, задайте максимальное число активных сеансов и максимальное время существования сеанса с помощью свойства <xref:System.ServiceModel.Channels.SecurityBindingElement> класса <xref:System.ServiceModel.Channels.SecurityBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="e5f5e-173">To mitigate this, set the limit for the maximum number of active sessions and the maximum lifetime for a session by setting the <xref:System.ServiceModel.Channels.SecurityBindingElement> property of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e5f5e-174">См. также</span><span class="sxs-lookup"><span data-stu-id="e5f5e-174">See also</span></span>

- [<span data-ttu-id="e5f5e-175">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="e5f5e-175">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="e5f5e-176">Раскрытие информации</span><span class="sxs-lookup"><span data-stu-id="e5f5e-176">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="e5f5e-177">Несанкционированное получение привилегий</span><span class="sxs-lookup"><span data-stu-id="e5f5e-177">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="e5f5e-178">Отказ в обслуживании</span><span class="sxs-lookup"><span data-stu-id="e5f5e-178">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="e5f5e-179">Атаки с повторением</span><span class="sxs-lookup"><span data-stu-id="e5f5e-179">Replay Attacks</span></span>](replay-attacks.md)
- [<span data-ttu-id="e5f5e-180">Незаконное изменение</span><span class="sxs-lookup"><span data-stu-id="e5f5e-180">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="e5f5e-181">Неподдерживаемые сценарии</span><span class="sxs-lookup"><span data-stu-id="e5f5e-181">Unsupported Scenarios</span></span>](unsupported-scenarios.md)
