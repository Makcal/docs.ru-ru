---
description: 'Дополнительные сведения: объектная модель обнаружения WCF'
title: Модель объектов обнаружения WCF
ms.date: 03/30/2017
ms.assetid: 8365a152-eacd-4779-9130-bbc48fa5c5d9
ms.openlocfilehash: e0d1c569329e0f6c5d4a6cfe4271b954299efdac
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99732921"
---
# <a name="wcf-discovery-object-model"></a><span data-ttu-id="d08fe-103">Модель объектов обнаружения WCF</span><span class="sxs-lookup"><span data-stu-id="d08fe-103">WCF Discovery Object Model</span></span>

<span data-ttu-id="d08fe-104">Обнаружение WCF включает в себя набор типов, обеспечивающих унифицированную модель программирования, которая позволяет создавать службы, доступные для обнаружения во время выполнения, а также клиентов, которые могут находить и использовать их.</span><span class="sxs-lookup"><span data-stu-id="d08fe-104">WCF Discovery consists of a set of types that provide a unified programming model that allows you to write services that are discoverable at runtime and clients that find and use these services.</span></span>  
  
## <a name="making-a-service-discoverable-and-finding-services"></a><span data-ttu-id="d08fe-105">Включение возможности обнаружения для службы и обнаружения служб</span><span class="sxs-lookup"><span data-stu-id="d08fe-105">Making a Service Discoverable and Finding Services</span></span>  

 <span data-ttu-id="d08fe-106">Чтобы служба WCF была доступной для обнаружения, добавьте поведение <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> в описание <xref:System.ServiceModel.Description.ServiceDescription> узла службы и задайте конечную точку обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-106">To make a WCF service discoverable, add a <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> to the <xref:System.ServiceModel.Description.ServiceDescription> of the service host and add a discovery endpoint.</span></span> <span data-ttu-id="d08fe-107">Если служба настроена для отправки сообщений с объявлениями (путем добавления <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>), то объявление отправляется при открытии и закрытии узла службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-107">If a service is configured to send announcement messages (by adding an <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>) the announcement is sent when the service host is opened and closed.</span></span>  
  
 <span data-ttu-id="d08fe-108">Чтобы клиент мог следить за сообщениями службы с объявлениями, он должен разместить службу объявлений и добавить одну или более конечных точек объявлений.</span><span class="sxs-lookup"><span data-stu-id="d08fe-108">A client that wants to listen for service announcement messages hosts an announcement service and adds one or more announcement endpoints.</span></span> <span data-ttu-id="d08fe-109">Служба объявлений получает сообщения с объявлениями и создает события объявлений.</span><span class="sxs-lookup"><span data-stu-id="d08fe-109">The announcement service receives announcement messages and raises announcement events.</span></span>  
  
 <span data-ttu-id="d08fe-110">Клиент пользуется для поиска доступных служб классом <xref:System.ServiceModel.Discovery.DiscoveryClient>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-110">A client uses the <xref:System.ServiceModel.Discovery.DiscoveryClient> class to search for available services.</span></span> <span data-ttu-id="d08fe-111">Приложение клиента создает класс <xref:System.ServiceModel.Discovery.DiscoveryClient>, передавая конечную точку обнаружения, которая указывает, куда следует отправлять сообщения обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-111">The client application instantiates the <xref:System.ServiceModel.Discovery.DiscoveryClient> class, passing in a discovery endpoint that specifies where to send discovery messages.</span></span> <span data-ttu-id="d08fe-112">Клиент вызывает метод <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A>, который отправляет запрос `Probe`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-112">The client calls the <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> method, which sends a `Probe` request.</span></span> <span data-ttu-id="d08fe-113">Службы, следящие за сообщениями обнаружения, получают запрос `Probe`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-113">Services listening for discovery messages receive this `Probe` request.</span></span> <span data-ttu-id="d08fe-114">Если служба совпадает с критериями, заданными в `Probe`, то она отправляет сообщение `ProbeMatch` обратно клиенту.</span><span class="sxs-lookup"><span data-stu-id="d08fe-114">If the service matches the criteria specified in the `Probe`, it sends a `ProbeMatch` message back to the client.</span></span>  
  
## <a name="object-model"></a><span data-ttu-id="d08fe-115">Модель объектов</span><span class="sxs-lookup"><span data-stu-id="d08fe-115">Object Model</span></span>  

 <span data-ttu-id="d08fe-116">API-интерфейс обнаружения WCF определяет следующие классы:</span><span class="sxs-lookup"><span data-stu-id="d08fe-116">The WCF Discovery API defines the following classes:</span></span>  
  
- <xref:System.ServiceModel.Discovery.AnnouncementClient>  
  
- <xref:System.ServiceModel.Discovery.AnnouncementEndpoint>  
  
- <xref:System.ServiceModel.Discovery.AnnouncementService>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryClient>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryEndpoint>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator>  
  
- <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryProxy>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryService>  
  
- <xref:System.ServiceModel.Discovery.DiscoveryVersion>  
  
- <xref:System.ServiceModel.Discovery.DynamicEndpoint>  
  
- <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior>  
  
- <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>  
  
- <xref:System.ServiceModel.Discovery.FindCriteria>  
  
- <xref:System.ServiceModel.Discovery.FindRequestContext>  
  
- <xref:System.ServiceModel.Discovery.FindResponse>  
  
- <xref:System.ServiceModel.Discovery.ResolveCriteria>  
  
- <xref:System.ServiceModel.Discovery.ResolveResponse>  
  
- <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior>  

- <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint>  
  
- <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint>  
  
## <a name="announcementclient"></a><span data-ttu-id="d08fe-117">AnnouncementClient</span><span class="sxs-lookup"><span data-stu-id="d08fe-117">AnnouncementClient</span></span>  

 <span data-ttu-id="d08fe-118">Класс <xref:System.ServiceModel.Discovery.AnnouncementClient> предоставляет синхронные и асинхронные методы для отправки сообщений с объявлениями.</span><span class="sxs-lookup"><span data-stu-id="d08fe-118">The <xref:System.ServiceModel.Discovery.AnnouncementClient> class provides synchronous and asynchronous methods for sending announcement messages.</span></span> <span data-ttu-id="d08fe-119">Существует два типа сообщений с объявлениями ― Hello и Bye.</span><span class="sxs-lookup"><span data-stu-id="d08fe-119">There are two types of announcement messages, Hello and Bye.</span></span> <span data-ttu-id="d08fe-120">Сообщение Hello указывает, что служба стала доступной, а сообщение Bye ― что существующая служба стала недоступной.</span><span class="sxs-lookup"><span data-stu-id="d08fe-120">A Hello message is sent to indicate that a service has become available and a Bye message is sent to indicate that an existing service has become unavailable.</span></span> <span data-ttu-id="d08fe-121">Разработчик создает экземпляр <xref:System.ServiceModel.Discovery.AnnouncementClient> и передает экземпляр <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> конструктору в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="d08fe-121">The developer creates an <xref:System.ServiceModel.Discovery.AnnouncementClient> instance, passing an instance of <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> as a constructor parameter.</span></span>  
  
## <a name="announcementendpoint"></a><span data-ttu-id="d08fe-122">AnnouncementEndpoint</span><span class="sxs-lookup"><span data-stu-id="d08fe-122">AnnouncementEndpoint</span></span>  

 <span data-ttu-id="d08fe-123"><xref:System.ServiceModel.Discovery.AnnouncementEndpoint> представляет стандартную конечную точку с заданным контрактом объявления.</span><span class="sxs-lookup"><span data-stu-id="d08fe-123"><xref:System.ServiceModel.Discovery.AnnouncementEndpoint> represents a standard endpoint with a fixed announcement contract.</span></span> <span data-ttu-id="d08fe-124">Используется службой или клиентом для отправки и получения сообщений с объявлениями.</span><span class="sxs-lookup"><span data-stu-id="d08fe-124">It is used by a service or client to send and receive announcement messages.</span></span> <span data-ttu-id="d08fe-125">По умолчанию класс <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> использует версию протокола WS_Discovery 11.</span><span class="sxs-lookup"><span data-stu-id="d08fe-125">By default, the <xref:System.ServiceModel.Discovery.AnnouncementEndpoint> class is set to use the WS_Discovery 11 protocol version.</span></span>  
  
## <a name="announcementservice"></a><span data-ttu-id="d08fe-126">AnnouncementService</span><span class="sxs-lookup"><span data-stu-id="d08fe-126">AnnouncementService</span></span>  

 <span data-ttu-id="d08fe-127"><xref:System.ServiceModel.Discovery.AnnouncementService> ― системная реализация службы объявлений, которая получает и обрабатывает сообщения с объявлениями.</span><span class="sxs-lookup"><span data-stu-id="d08fe-127"><xref:System.ServiceModel.Discovery.AnnouncementService> is a system-provided implementation of an announcement service that receives and processes announcement messages.</span></span> <span data-ttu-id="d08fe-128">При получении сообщения Hello или Bye экземпляр <xref:System.ServiceModel.Discovery.AnnouncementService> вызывает соответствующий виртуальный метод <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOnlineAnnouncement%2A> или <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOfflineAnnouncement%2A>, который создает события объявлений.</span><span class="sxs-lookup"><span data-stu-id="d08fe-128">When a Hello or Bye message is received, the <xref:System.ServiceModel.Discovery.AnnouncementService> instance calls the appropriate virtual method <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOnlineAnnouncement%2A> or <xref:System.ServiceModel.Discovery.AnnouncementService.OnBeginOfflineAnnouncement%2A>, which raises announcement events.</span></span>  
  
## <a name="discoveryclient"></a><span data-ttu-id="d08fe-129">DiscoveryClient</span><span class="sxs-lookup"><span data-stu-id="d08fe-129">DiscoveryClient</span></span>  

 <span data-ttu-id="d08fe-130">Класс <xref:System.ServiceModel.Discovery.DiscoveryClient> используется клиентским приложением для нахождения и разрешения доступных служб.</span><span class="sxs-lookup"><span data-stu-id="d08fe-130">The <xref:System.ServiceModel.Discovery.DiscoveryClient> class is used by a client application to find and resolve available services.</span></span> <span data-ttu-id="d08fe-131">Он предоставляет синхронные и асинхронные методы для нахождения и разрешения служб на основе заданных критериев <xref:System.ServiceModel.Discovery.FindCriteria> и <xref:System.ServiceModel.Discovery.ResolveCriteria> соответственно.</span><span class="sxs-lookup"><span data-stu-id="d08fe-131">It provides synchronous and asynchronous methods for finding and resolving services based on the specified <xref:System.ServiceModel.Discovery.FindCriteria> and <xref:System.ServiceModel.Discovery.ResolveCriteria> respectively.</span></span> <span data-ttu-id="d08fe-132">Разработчик создает экземпляр <xref:System.ServiceModel.Discovery.DiscoveryClient> и передает экземпляр <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> в качестве параметра конструктора.</span><span class="sxs-lookup"><span data-stu-id="d08fe-132">The developer creates a <xref:System.ServiceModel.Discovery.DiscoveryClient> instance and provides an instance of <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> as a constructor parameter.</span></span>  
  
 <span data-ttu-id="d08fe-133">Чтобы найти службу, разработчик вызывает синхронный или асинхронный метод `Find`, который предоставляет экземпляр <xref:System.ServiceModel.Discovery.FindCriteria>, содержащий критерии поиска для использования.</span><span class="sxs-lookup"><span data-stu-id="d08fe-133">To find a service, the developer invokes the synchronous or asynchronous `Find` method, which provides a <xref:System.ServiceModel.Discovery.FindCriteria> instance that contains the search criteria to use.</span></span> <span data-ttu-id="d08fe-134">Клиент <xref:System.ServiceModel.Discovery.DiscoveryClient> создает сообщение `Probe` с соответствующими заголовками и отправляет запрос поиска.</span><span class="sxs-lookup"><span data-stu-id="d08fe-134">The <xref:System.ServiceModel.Discovery.DiscoveryClient> creates a `Probe` message with the appropriate headers, and sends the find request.</span></span> <span data-ttu-id="d08fe-135">Поскольку в любое время может быть более одного необработанного запроса `Find`, клиент сопоставляет полученные ответы и проверяет ответ.</span><span class="sxs-lookup"><span data-stu-id="d08fe-135">Because there can be more than one outstanding `Find` request at any time, the client correlates the received responses and validates the response.</span></span> <span data-ttu-id="d08fe-136">Затем клиент доставляет результаты объекту, вызвавшему операцию `Find`, с помощью метода <xref:System.ServiceModel.Discovery.FindResponse>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-136">It then delivers the results to the caller of the `Find` operation using <xref:System.ServiceModel.Discovery.FindResponse>.</span></span>  
  
 <span data-ttu-id="d08fe-137">Чтобы разрешить известную службу, разработчик вызывает синхронный или асинхронный метод `Resolve`, который представляет экземпляр <xref:System.ServiceModel.Discovery.ResolveCriteria>, содержащий адрес <xref:System.ServiceModel.EndpointAddress> известной службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-137">To resolve a known service, the developer invokes the synchronous or asynchronous `Resolve` method that provides an instance of <xref:System.ServiceModel.Discovery.ResolveCriteria> that contains the <xref:System.ServiceModel.EndpointAddress> of the known service.</span></span> <span data-ttu-id="d08fe-138">Клиент <xref:System.ServiceModel.Discovery.DiscoveryClient> создает сообщение `Resolve` с соответствующими заголовками и отправляет запрос разрешения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-138">The <xref:System.ServiceModel.Discovery.DiscoveryClient> creates the `Resolve` message with the appropriate headers and sends the resolve request.</span></span> <span data-ttu-id="d08fe-139">Полученный ответ сопоставляется с необработанными запросами разрешения, и результат доставляется объекту, вызвавшему операцию `Resolve`, при помощи метода <xref:System.ServiceModel.Discovery.ResolveResponse>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-139">The received response is correlated against the outstanding resolve requests and the result is delivered to the caller of the `Resolve` operation using <xref:System.ServiceModel.Discovery.ResolveResponse>.</span></span>  
  
 <span data-ttu-id="d08fe-140">Если прокси-сервер обнаружения присутствует в сети и клиент <xref:System.ServiceModel.Discovery.DiscoveryClient> отправляет запрос обнаружения по нескольким адресам, то прокси-сервер обнаружения может ответить многоадресным сообщением отмены типа Hello.</span><span class="sxs-lookup"><span data-stu-id="d08fe-140">If a discovery proxy is present on the network and the <xref:System.ServiceModel.Discovery.DiscoveryClient> sends the discovery request in a multicast fashion, the discovery proxy can respond with the multicast suppression Hello message.</span></span> <span data-ttu-id="d08fe-141">Клиент <xref:System.ServiceModel.Discovery.DiscoveryClient> создает событие `ProxyAvailable` при получении сообщений Hello в ответ на необработанный запрос `Find` или `Resolve`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-141">The <xref:System.ServiceModel.Discovery.DiscoveryClient> raises the `ProxyAvailable` event when it receives Hello messages in response to outstanding `Find` or `Resolve` requests.</span></span> <span data-ttu-id="d08fe-142">Событие `ProxyAvailable` содержит метаданные <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> о прокси-сервере обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-142">The `ProxyAvailable` event contains the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> about the discovery proxy.</span></span> <span data-ttu-id="d08fe-143">Затем разработчик должен использовать эту информацию для переключения из нерегламентированного режима в управляемый.</span><span class="sxs-lookup"><span data-stu-id="d08fe-143">It is up to the developer to use this information to switch from Ad hoc to Managed mode.</span></span>  
  
## <a name="discoveryendpoint"></a><span data-ttu-id="d08fe-144">DiscoveryEndpoint</span><span class="sxs-lookup"><span data-stu-id="d08fe-144">DiscoveryEndpoint</span></span>  

 <span data-ttu-id="d08fe-145"><xref:System.ServiceModel.Discovery.DiscoveryEndpoint> представляет стандартную конечную точку с заданным контрактом обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-145"><xref:System.ServiceModel.Discovery.DiscoveryEndpoint> represents a standard endpoint with a fixed discovery contract.</span></span> <span data-ttu-id="d08fe-146">Используется службой или клиентом для отправки и получения сообщений обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-146">It is used by a service or client to send or receive discovery messages.</span></span> <span data-ttu-id="d08fe-147">По умолчанию конечная точка <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> использует режим <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Managed?displayProperty=nameWithType> и версию WSDiscovery11.</span><span class="sxs-lookup"><span data-stu-id="d08fe-147">By default, <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> is set to use <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Managed?displayProperty=nameWithType> mode and the WSDiscovery11 WS-Discovery version.</span></span>  
  
## <a name="discoverymessagesequencegenerator"></a><span data-ttu-id="d08fe-148">DiscoveryMessageSequenceGenerator</span><span class="sxs-lookup"><span data-stu-id="d08fe-148">DiscoveryMessageSequenceGenerator</span></span>  

 <span data-ttu-id="d08fe-149"><xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator> используется для формирования последовательности сообщений <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>, когда служба отправляет сообщения обнаружения или сообщения с объявлениями.</span><span class="sxs-lookup"><span data-stu-id="d08fe-149"><xref:System.ServiceModel.Discovery.DiscoveryMessageSequenceGenerator> is used to generate a <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence> when the service is sending out Discovery or Announcement messages.</span></span>  
  
## <a name="discoveryservice"></a><span data-ttu-id="d08fe-150">DiscoveryService</span><span class="sxs-lookup"><span data-stu-id="d08fe-150">DiscoveryService</span></span>  

 <span data-ttu-id="d08fe-151">Абстрактный класс <xref:System.ServiceModel.Discovery.DiscoveryService> реализует базовые функции для получения и обработки сообщений `Probe` и `Resolve`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-151">The <xref:System.ServiceModel.Discovery.DiscoveryService> abstract class provides a framework for receiving and processing `Probe` and `Resolve` messages.</span></span> <span data-ttu-id="d08fe-152">При получении сообщения `Probe` служба <xref:System.ServiceModel.Discovery.DiscoveryService> создает экземпляр <xref:System.ServiceModel.Discovery.FindRequestContext> на основе входящего сообщения и вызывает виртуальный метод <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginFind%2A>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-152">When a `Probe` message is received, <xref:System.ServiceModel.Discovery.DiscoveryService> creates an instance of <xref:System.ServiceModel.Discovery.FindRequestContext> based on the incoming message and invokes the <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginFind%2A> virtual method.</span></span> <span data-ttu-id="d08fe-153">При получении сообщения `Resolve` служба <xref:System.ServiceModel.Discovery.DiscoveryService> вызывает виртуальный метод <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginResolve%2A>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-153">When a `Resolve` message is received, <xref:System.ServiceModel.Discovery.DiscoveryService> invokes the <xref:System.ServiceModel.Discovery.DiscoveryService.OnBeginResolve%2A> virtual method.</span></span> <span data-ttu-id="d08fe-154">Можно наследовать у этого класса для обеспечения реализации пользовательской службы обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-154">You can inherit from this class to provide a custom Discovery Service implementation.</span></span>  
  
## <a name="discoveryproxy"></a><span data-ttu-id="d08fe-155">DiscoveryProxy</span><span class="sxs-lookup"><span data-stu-id="d08fe-155">DiscoveryProxy</span></span>  

 <span data-ttu-id="d08fe-156">Абстрактный класс <xref:System.ServiceModel.Discovery.DiscoveryProxy> реализует базовые функции для получения и обработки сообщений обнаружения и сообщений с объявлениями.</span><span class="sxs-lookup"><span data-stu-id="d08fe-156">The <xref:System.ServiceModel.Discovery.DiscoveryProxy> abstract class provides a framework for receiving and processing discovery and announcement messages.</span></span> <span data-ttu-id="d08fe-157">Этот класс можно наследовать при реализации пользовательского прокси-сервера обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-157">You inherit from this class when you are implementing a custom discovery proxy.</span></span> <span data-ttu-id="d08fe-158">При получении сообщения `Probe` через многоадресную рассылку класс <xref:System.ServiceModel.Discovery.DiscoveryProxy> вызывает виртуальный метод `BeginShouldRedirectFind`, чтобы определить, следует ли отправить многоадресное сообщение отмены.</span><span class="sxs-lookup"><span data-stu-id="d08fe-158">When a `Probe` message is received over multicast, the <xref:System.ServiceModel.Discovery.DiscoveryProxy> class calls the `BeginShouldRedirectFind` virtual method to determine whether a multicast suppression message should to be sent.</span></span> <span data-ttu-id="d08fe-159">Если разработчик решит не отправлять многоадресное сообщение отмены либо если по адресу одноадресной рассылки получено сообщение `Probe`, будет создан экземпляр класса <xref:System.ServiceModel.Discovery.FindRequestContext> на основе входящего сообщения и вызван виртуальный метод `OnBeginFind`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-159">If the developer decides not to send a multicast suppression message or if the `Probe` message was received over unicast, it creates an instance of the <xref:System.ServiceModel.Discovery.FindRequestContext> class based on the incoming message and invokes the `OnBeginFind` virtual method.</span></span> <span data-ttu-id="d08fe-160">При получении сообщения `Resolve` через многоадресную рассылку класс <xref:System.ServiceModel.Discovery.DiscoveryProxy> вызывает виртуальный метод `ShouldRedirectResolve`, чтобы определить, следует ли отправить многоадресное сообщение отмены.</span><span class="sxs-lookup"><span data-stu-id="d08fe-160">When a `Resolve` message is received over multicast, The <xref:System.ServiceModel.Discovery.DiscoveryProxy> class calls the `ShouldRedirectResolve` virtual method to determine whether a multicast suppression message should to be sent.</span></span> <span data-ttu-id="d08fe-161">Если разработчик решит не отправлять многоадресное сообщение отмены либо если по адресу одноадресной рассылки получено сообщение `Resolve`, будет создан экземпляр класса <xref:System.ServiceModel.Discovery.ResolveCriteria> на основе входящего сообщения и вызван виртуальный метод `OnBeginResolve`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-161">If the developer decides not to send a multicast suppression message or if the `Resolve` message was received over unicast, it creates an instance of the <xref:System.ServiceModel.Discovery.ResolveCriteria> class based on the incoming message and invokes the `OnBeginResolve` virtual method.</span></span> <span data-ttu-id="d08fe-162">При получении сообщения Hello или Bye экземпляр <xref:System.ServiceModel.Discovery.DiscoveryProxy> вызывает соответствующий виртуальный метод (`OnBeginOnlineAnnouncement` или `OnBeingOfflineAnnouncement`), который создает события объявлений.</span><span class="sxs-lookup"><span data-stu-id="d08fe-162">When a Hello or Bye message is received, <xref:System.ServiceModel.Discovery.DiscoveryProxy> calls the appropriate virtual method (`OnBeginOnlineAnnouncement` or `OnBeingOfflineAnnouncement`), which raises announcement events.</span></span>  
  
## <a name="discoveryversion"></a><span data-ttu-id="d08fe-163">DiscoveryVersion</span><span class="sxs-lookup"><span data-stu-id="d08fe-163">DiscoveryVersion</span></span>  

 <span data-ttu-id="d08fe-164">Класс <xref:System.ServiceModel.Discovery.DiscoveryVersion> представляет используемую версию протокола обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-164">The <xref:System.ServiceModel.Discovery.DiscoveryVersion> class represents the discovery protocol version to use.</span></span>  
  
## <a name="endpointdiscoverybehavior"></a><span data-ttu-id="d08fe-165">EndpointDiscoveryBehavior</span><span class="sxs-lookup"><span data-stu-id="d08fe-165">EndpointDiscoveryBehavior</span></span>  

 <span data-ttu-id="d08fe-166">Класс <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> служит для контроля возможности обнаружения конечной точки, указания расширений и дополнительных имен типов контрактов.</span><span class="sxs-lookup"><span data-stu-id="d08fe-166">The <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> class is used to control the discoverability of an endpoint, specify the extensions, additional contract type names.</span></span> <span data-ttu-id="d08fe-167">и областей, связанных с этой конечной точкой.</span><span class="sxs-lookup"><span data-stu-id="d08fe-167">and the scopes associated with that endpoint.</span></span> <span data-ttu-id="d08fe-168">Это поведение добавляется в конечную точку приложения для настройки ее метаданных <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-168">This behavior is added to an application endpoint to configure its <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="d08fe-169">При добавлении поведения <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> к узлу службы все конечные точки приложения, размещенные узлом службы, по умолчанию получают возможность обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-169">When <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> is added to the service host, all the application endpoints hosted by the service host by default become discoverable.</span></span> <span data-ttu-id="d08fe-170">Разработчик может отключить обнаружение для определенной конечной точки, установив свойство <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A> в значение `false`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-170">The developer can turn off discovery for a specific endpoint by setting the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A> property to `false`.</span></span>  
  
## <a name="endpointdiscoverymetadata"></a><span data-ttu-id="d08fe-171">EndpointDiscoveryMetadata</span><span class="sxs-lookup"><span data-stu-id="d08fe-171">EndpointDiscoveryMetadata</span></span>  

 <span data-ttu-id="d08fe-172">Класс <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> обеспечивает независимое от версии представление конечной точки, опубликованной службой.</span><span class="sxs-lookup"><span data-stu-id="d08fe-172">The <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> class provides a version-independent representation of an endpoint published by the service.</span></span> <span data-ttu-id="d08fe-173">Служба содержит адреса конечных точек, URI прослушивания, имена типов контрактов, области, версию метаданных и модули, указанные разработчиком службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-173">It contains endpoint addresses, listen URIs, contract type names, scopes, metadata version and extensions specified by the service developer.</span></span> <span data-ttu-id="d08fe-174">Критерии <xref:System.ServiceModel.Discovery.FindCriteria>, отправляемые клиентом в течение операции `Probe`, сопоставляются с метаданными <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-174">The <xref:System.ServiceModel.Discovery.FindCriteria> sent by the client during a `Probe` operation is matched against the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="d08fe-175">Если критерии совпадут, метаданные <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> будут возвращены клиенту.</span><span class="sxs-lookup"><span data-stu-id="d08fe-175">If the criteria matches, then the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> is returned to the client.</span></span> <span data-ttu-id="d08fe-176">Адрес конечной точки в <xref:System.ServiceModel.Discovery.ResolveCriteria> сопоставляется с адресом конечной точки <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-176">The endpoint address in <xref:System.ServiceModel.Discovery.ResolveCriteria> is matched against the endpoint address of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>.</span></span> <span data-ttu-id="d08fe-177">Если критерии совпадут, метаданные <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> будут возвращены клиенту.</span><span class="sxs-lookup"><span data-stu-id="d08fe-177">If the criteria matches, then the <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> is returned to the client.</span></span>  
  
## <a name="findcriteria"></a><span data-ttu-id="d08fe-178">FindCriteria</span><span class="sxs-lookup"><span data-stu-id="d08fe-178">FindCriteria</span></span>  

 <span data-ttu-id="d08fe-179">Класс <xref:System.ServiceModel.Discovery.FindCriteria> является независимым от версии классом, который используется для указания критериев, используемых при нахождении службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-179">The <xref:System.ServiceModel.Discovery.FindCriteria> class is a version-independent class used to specify the criteria used when finding a service.</span></span> <span data-ttu-id="d08fe-180">Класс полностью поддерживает критерии, определенные WS-Discovery, для сопоставления служб.</span><span class="sxs-lookup"><span data-stu-id="d08fe-180">It fully supports the WS-Discovery-defined criteria for matching services.</span></span> <span data-ttu-id="d08fe-181">Он также имеет модули, которые разработчики могут использовать для указания пользовательских значений, используемых в течение процесса сопоставления.</span><span class="sxs-lookup"><span data-stu-id="d08fe-181">It also has extensions that developers can use to specify custom values that can be used during the matching process.</span></span> <span data-ttu-id="d08fe-182">Разработчик может предоставить критерии завершения для операции `Find`, указав значение <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A>, которое задает общее количество служб, разыскиваемых разработчиком, либо задает длительность <xref:System.ServiceModel.Discovery.FindCriteria.Duration%2A>, то есть время, в течение которого клиент ожидает ответы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-182">The developer can provide the termination criteria for the `Find` operation by specifying the <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A>, which specifies the total number of services the developer is looking for or that specifies the <xref:System.ServiceModel.Discovery.FindCriteria.Duration%2A>, which is the value that specifies how long the client waits for responses.</span></span>  
  
## <a name="findrequestcontext"></a><span data-ttu-id="d08fe-183">FindRequestContext</span><span class="sxs-lookup"><span data-stu-id="d08fe-183">FindRequestContext</span></span>  

 <span data-ttu-id="d08fe-184">Класс <xref:System.ServiceModel.Discovery.FindRequestContext> создается службой обнаружения на основе сообщения `Probe`, полученного при запуске клиентом операции `Find`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-184">The <xref:System.ServiceModel.Discovery.FindRequestContext> class is instantiated by the discovery service based on the `Probe` message it receives when a client initiates a `Find` operation.</span></span> <span data-ttu-id="d08fe-185">Класс содержит экземпляр <xref:System.ServiceModel.Discovery.FindCriteria>, заданный клиентом.</span><span class="sxs-lookup"><span data-stu-id="d08fe-185">It contains an instance of <xref:System.ServiceModel.Discovery.FindCriteria> that was specified by the client.</span></span>  
  
## <a name="findresponse"></a><span data-ttu-id="d08fe-186">FindResponse</span><span class="sxs-lookup"><span data-stu-id="d08fe-186">FindResponse</span></span>  

 <span data-ttu-id="d08fe-187">Класс <xref:System.ServiceModel.Discovery.FindResponse> возвращается объекту, вызвавшему метод <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A>, с ответами операции `Find`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-187">The <xref:System.ServiceModel.Discovery.FindResponse> class is returned to the caller of <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> with the responses of the `Find` operation.</span></span> <span data-ttu-id="d08fe-188">Также присутствует в <xref:System.ServiceModel.Discovery.FindCompletedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-188">It is also present in <xref:System.ServiceModel.Discovery.FindCompletedEventArgs>.</span></span> <span data-ttu-id="d08fe-189">Содержит коллекцию метаданных <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, которая является коллекцией обнаруженных конечных точек и словарем элементов <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> и <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-189">It contains a collection of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, which is the collection of discovered endpoints and a dictionary of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> and <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span></span>  
  
## <a name="resolvecriteria"></a><span data-ttu-id="d08fe-190">ResolveCriteria</span><span class="sxs-lookup"><span data-stu-id="d08fe-190">ResolveCriteria</span></span>  

 <span data-ttu-id="d08fe-191">Класс <xref:System.ServiceModel.Discovery.ResolveCriteria> является независимым от версии классом, который используется для указания критериев, используемых при разрешении уже известной службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-191">The <xref:System.ServiceModel.Discovery.ResolveCriteria> class is a version-independent class used to specify the criteria used when resolving an already known service.</span></span> <span data-ttu-id="d08fe-192">Содержит адрес конечной точки известной службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-192">It contains the endpoint address of the known service.</span></span> <span data-ttu-id="d08fe-193">Разработчик может предоставить критерии завершения для операции разрешения путем указания длительности <xref:System.ServiceModel.Discovery.ResolveCriteria.Duration%2A>, то есть времени, в течение которого клиент ожидает ответов.</span><span class="sxs-lookup"><span data-stu-id="d08fe-193">The developer can provide the termination criteria for the resolve operation by specifying the <xref:System.ServiceModel.Discovery.ResolveCriteria.Duration%2A>, which specifies how long the client waits for responses.</span></span>  
  
## <a name="resolveresponse"></a><span data-ttu-id="d08fe-194">ResolveResponse</span><span class="sxs-lookup"><span data-stu-id="d08fe-194">ResolveResponse</span></span>  

 <span data-ttu-id="d08fe-195">Класс <xref:System.ServiceModel.Discovery.ResolveResponse> возвращается объекту, вызвавшему метод <xref:System.ServiceModel.Discovery.DiscoveryClient.Resolve%2A>, с ответом операции `Resolve`.</span><span class="sxs-lookup"><span data-stu-id="d08fe-195">The <xref:System.ServiceModel.Discovery.ResolveResponse> is returned to the caller of the <xref:System.ServiceModel.Discovery.DiscoveryClient.Resolve%2A> method with the response of the `Resolve` operation.</span></span> <span data-ttu-id="d08fe-196">Также присутствует в <xref:System.ServiceModel.Discovery.ResolveCompletedEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-196">It is also present in <xref:System.ServiceModel.Discovery.ResolveCompletedEventArgs>.</span></span> <span data-ttu-id="d08fe-197">Содержит экземпляр метаданных <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, которые являются обнаруженными конечными точками, и экземпляр <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-197">It contains an instance of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, which is the discovered endpoints and an instance of <xref:System.ServiceModel.Discovery.DiscoveryMessageSequence>.</span></span>  
  
## <a name="servicediscoverybehavior"></a><span data-ttu-id="d08fe-198">ServiceDiscoveryBehavior</span><span class="sxs-lookup"><span data-stu-id="d08fe-198">ServiceDiscoveryBehavior</span></span>  

 <span data-ttu-id="d08fe-199">Класс <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> позволяет разработчику добавлять функцию обнаружения для службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-199">The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> class allows the developer to add the discovery feature to a service.</span></span> <span data-ttu-id="d08fe-200">Это поведение добавляется к <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-200">You add this behavior to the <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="d08fe-201">Класс <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> просматривает конечные точки приложения, добавленные к узлу службы, и создает коллекцию <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata>, содержащую конечные точки, доступные для обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-201">The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> class iterates over the application endpoints added to the service host and creates a collection of <xref:System.ServiceModel.Discovery.EndpointDiscoveryMetadata> from the discoverable endpoints.</span></span> <span data-ttu-id="d08fe-202">Все конечные точки по умолчанию доступны для обнаружения.</span><span class="sxs-lookup"><span data-stu-id="d08fe-202">All endpoints are discoverable by default.</span></span> <span data-ttu-id="d08fe-203">Возможность обнаружения определенной конечной точки может быть ограничена за счет добавления к ней поведения <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-203">The discoverability of a particular endpoint can be controlled by adding the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> to that particular endpoint.</span></span> <span data-ttu-id="d08fe-204">Если конечные точки объявлений добавлены в поведение <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior>, то объявление всех точек, которые могут быть обнаружены, отправляется для каждой конечной точки объявления при открытии или закрытии узла службы.</span><span class="sxs-lookup"><span data-stu-id="d08fe-204">If announcement endpoints are added to <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> then the announcement of all discoverable endpoints is sent over each of the announcement endpoints when the service host is opened or closed.</span></span>  
  
## <a name="udpannouncementendpoint"></a><span data-ttu-id="d08fe-205">UdpAnnouncementEndpoint</span><span class="sxs-lookup"><span data-stu-id="d08fe-205">UdpAnnouncementEndpoint</span></span>  

 <span data-ttu-id="d08fe-206">Класс <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> ― это стандартная точка объявления, которая является предустановленной для объявления через привязку для многоадресной рассылки UDP.</span><span class="sxs-lookup"><span data-stu-id="d08fe-206">The <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> class is a standard announcement endpoint that is pre-configured for announcement over a UDP multicast binding.</span></span> <span data-ttu-id="d08fe-207">По умолчанию класс <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> использует версию WSApril2005 WS_Discovery.</span><span class="sxs-lookup"><span data-stu-id="d08fe-207">By default, <xref:System.ServiceModel.Discovery.UdpAnnouncementEndpoint> is set to use the WSApril2005 WS_Discovery version.</span></span>  
  
## <a name="udpdiscoveryendpoint"></a><span data-ttu-id="d08fe-208">UdpDiscoveryEndpoint</span><span class="sxs-lookup"><span data-stu-id="d08fe-208">UdpDiscoveryEndpoint</span></span>  

 <span data-ttu-id="d08fe-209">Конечная точка <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> ― это стандартная конечная точка обнаружения, заранее настроенная для операций обнаружения через привязку для многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="d08fe-209">The <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> class is a standard discovery endpoint that is pre-configured for discovery over a UDP multicast binding.</span></span> <span data-ttu-id="d08fe-210">По умолчанию конечная точка <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> использует версию WSDiscovery11 WS-Discovery и режим <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Adhoc?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="d08fe-210">By default, <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> is set to use the WSDiscovery11 WS-Discovery version and <xref:System.ServiceModel.Discovery.ServiceDiscoveryMode.Adhoc?displayProperty=nameWithType> mode.</span></span>
