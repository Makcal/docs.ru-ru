---
description: Дополнительные сведения см. в статье как указать цепочку сертификатов центра сертификации, используемую для проверки подписей (WCF).
title: Практическое руководство. Указание цепочки сертификатов центра сертификации, используемой для проверки сигнатур (WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- certificates [WCF], specifying the certificate authority certificate chain
- certificates [WCF], verifying signatures
ms.assetid: 7c719355-aa41-4567-80d0-5115a8cf73fd
ms.openlocfilehash: f3bfcb378641db2a4bdba054f25042a5e7e9be07
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99793458"
---
# <a name="how-to-specify-the-certificate-authority-certificate-chain-used-to-verify-signatures-wcf"></a><span data-ttu-id="f075a-103">Практическое руководство. Указание цепочки сертификатов центра сертификации, используемой для проверки сигнатур (WCF)</span><span class="sxs-lookup"><span data-stu-id="f075a-103">How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)</span></span>

<span data-ttu-id="f075a-104">Когда Windows Communication Foundation (WCF) получает сообщение SOAP, подписанное с помощью сертификата X. 509, по умолчанию проверяет, был ли сертификат X. 509 выдан доверенным центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="f075a-104">When Windows Communication Foundation (WCF) receives a SOAP message signed using an X.509 certificate, by default it verifies that the X.509 certificate was issued by a trusted certification authority.</span></span> <span data-ttu-id="f075a-105">Для этого выполняется поиск в хранилище сертификатов и проверяется, отмечен ли соответствующий центр сертификации как надежный.</span><span class="sxs-lookup"><span data-stu-id="f075a-105">This is done by looking in a certificate store and determining if the certificate for that certification authority has been designated as trusted.</span></span> <span data-ttu-id="f075a-106">Чтобы WCF мог выполнить это определение, цепочка сертификатов центра сертификации должна быть установлена в правильном хранилище сертификатов.</span><span class="sxs-lookup"><span data-stu-id="f075a-106">In order for WCF to make this determination, the certification authority certificate chain must be installed in the correct certificate store.</span></span>  
  
### <a name="to-install-a-certification-authority-certificate-chain"></a><span data-ttu-id="f075a-107">Установка цепи сертификатов центра сертификации</span><span class="sxs-lookup"><span data-stu-id="f075a-107">To install a certification authority certificate chain</span></span>  
  
- <span data-ttu-id="f075a-108">Для каждого центра сертификации, которому получатель сообщения SOAP доверяет сертификатам X. 509, выданным из, установите цепочку сертификатов центра сертификации в хранилище сертификатов, которое WCF настраивает для получения сертификатов X. 509.</span><span class="sxs-lookup"><span data-stu-id="f075a-108">For each certification authority that a SOAP message recipient intends to trust X.509 certificates issued from, install the certification authority certificate chain into the certificate store that WCF is configured to retrieve X.509 certificates from.</span></span>  
  
     <span data-ttu-id="f075a-109">Например, если получатель сообщения SOAP будет считаться доверенным для сертификатов X. 509, выпущенных корпорацией Майкрософт, то цепочка сертификатов центра сертификации для Майкрософт должна быть установлена в хранилище сертификатов, в котором WCF настроена на поиск сертификатов X. 509.</span><span class="sxs-lookup"><span data-stu-id="f075a-109">For instance, if a SOAP message recipient intends to trust X.509 certificates issued by Microsoft, the certification authority certificate chain for Microsoft must be installed in the certificate store that WCF is set up to look for X.509 certificates from.</span></span> <span data-ttu-id="f075a-110">Хранилище сертификатов, в котором WCF ищет сертификаты X. 509, можно указать в коде или конфигурации.</span><span class="sxs-lookup"><span data-stu-id="f075a-110">The certificate store in which WCF looks for X.509 certificates can be specified in code or configuration.</span></span> <span data-ttu-id="f075a-111">Например, это можно указать в коде с помощью <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> метода или в конфигурации несколькими способами, включая [\<serviceCertificate>](../../configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) .</span><span class="sxs-lookup"><span data-stu-id="f075a-111">For example, this can be specified in code using the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method or in configuration a few ways, including the [\<serviceCertificate>](../../configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) .</span></span>  
  
     <span data-ttu-id="f075a-112">Поскольку Windows поставляется с комплектом цепочек сертификатов по умолчанию для надежных центров сертификации, в некоторых случаях не требуется устанавливать цепочки сертификатов для всех центров сертификации.</span><span class="sxs-lookup"><span data-stu-id="f075a-112">Because Windows ships with a set of default certificate chains for trusted certificate authorities, it may not be necessary to install the certificate chain for all certificate authorities.</span></span>  
  
    1. <span data-ttu-id="f075a-113">Экспорт цепи сертификатов центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="f075a-113">Export the certification authority certificate chain.</span></span>  
  
         <span data-ttu-id="f075a-114">Конкретный способ экспорта зависит от центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="f075a-114">Exactly how this is done depends on the certification authority.</span></span> <span data-ttu-id="f075a-115">Если центр сертификации работает под управлением служб сертификации Майкрософт, выберите **скачать сертификат ЦС, цепочку сертификатов или CRL**, а затем щелкните **скачать сертификат ЦС**.</span><span class="sxs-lookup"><span data-stu-id="f075a-115">If the certification authority is running Microsoft Certificate Services, select **Download a CA certificate, certificate chain, or CRL**, and then choose **Download CA certificate**.</span></span>  
  
    2. <span data-ttu-id="f075a-116">Импорт цепи сертификатов центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="f075a-116">Import the certification authority certificate chain.</span></span>  
  
         <span data-ttu-id="f075a-117">В консоли управления (MMC), откройте оснастку диспетчера сертификатов.</span><span class="sxs-lookup"><span data-stu-id="f075a-117">In the Microsoft Management Console (MMC), open the Certificates snap-in.</span></span> <span data-ttu-id="f075a-118">Для хранилища сертификатов, в котором WCF настроена для получения сертификатов X. 509 из, выберите папку **Доверенные корневые** **центры сертификации** .</span><span class="sxs-lookup"><span data-stu-id="f075a-118">For the certificate store that WCF is configured to retrieve X.509 certificates from, select the **Trusted Root** **Certification Authorities** folder.</span></span> <span data-ttu-id="f075a-119">В папке **Доверенные корневые центры сертификации** щелкните правой кнопкой мыши папку **Сертификаты** , наведите указатель на пункт **все задачи** и выберите команду **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="f075a-119">Under the **Trusted Root Certification Authorities** folder, right-click the **Certificates** folder, point to **All Tasks**, and then click **Import**.</span></span> <span data-ttu-id="f075a-120">Укажите файл, экспортированный на предыдущем этапе.</span><span class="sxs-lookup"><span data-stu-id="f075a-120">Provide the file exported in step a.</span></span>  
  
         <span data-ttu-id="f075a-121">Дополнительные сведения об использовании оснастки "сертификаты" в консоли MMC см. в разделе [как просматривать сертификаты с помощью оснастки MMC](how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="f075a-121">For more information about using the Certificates snap-in with MMC, see [How to: View Certificates with the MMC Snap-in](how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f075a-122">См. также</span><span class="sxs-lookup"><span data-stu-id="f075a-122">See also</span></span>

- [<span data-ttu-id="f075a-123">Работа с сертификатами</span><span class="sxs-lookup"><span data-stu-id="f075a-123">Working with Certificates</span></span>](working-with-certificates.md)
