---
title: Общие сведения о делегатах
description: Общие сведения о делегатах, обзор связанных с ними основных понятий и обсуждение целей разработки языка для делегатов.
ms.date: 02/02/2021
ms.technology: csharp-fundamentals
ms.assetid: 59b61d77-84e5-457b-8da5-fb5f24ca6ed6
ms.openlocfilehash: 72086301a6dd0552ab25baf732978802ad62669b
ms.sourcegitcommit: 4df8e005c074ceb1f978f007b222fe253be2baf3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2021
ms.locfileid: "99548348"
---
# <a name="introduction-to-delegates"></a><span data-ttu-id="a6574-103">Общие сведения о делегатах</span><span class="sxs-lookup"><span data-stu-id="a6574-103">Introduction to Delegates</span></span>

<span data-ttu-id="a6574-104">Делегаты предоставляют механизм *позднего связывания* в .NET.</span><span class="sxs-lookup"><span data-stu-id="a6574-104">Delegates provide a *late binding* mechanism in .NET.</span></span> <span data-ttu-id="a6574-105">Позднее связывание означает, что создается алгоритм, где вызывающий объект также предоставляет по крайней мере один метод, который реализует часть алгоритма.</span><span class="sxs-lookup"><span data-stu-id="a6574-105">Late Binding means that you create an algorithm where the caller also supplies at least one method that implements part of the algorithm.</span></span>

<span data-ttu-id="a6574-106">Например, рассмотрим сортировку списка звезд в астрономическом приложении.</span><span class="sxs-lookup"><span data-stu-id="a6574-106">For example, consider sorting a list of stars in an astronomy application.</span></span>
<span data-ttu-id="a6574-107">Можно отсортировать звезды по расстоянию от Земли, по величине или по воспринимаемой яркости.</span><span class="sxs-lookup"><span data-stu-id="a6574-107">You may choose to sort those stars by their distance from the earth, or the magnitude of the star, or their perceived brightness.</span></span>

<span data-ttu-id="a6574-108">Во всех этих случаях метод Sort() выполняет, по сути, одно и то же: упорядочивает элементы в списке на основе некоего сравнения.</span><span class="sxs-lookup"><span data-stu-id="a6574-108">In all those cases, the Sort() method does essentially the same thing: arranges the items in the list based on some comparison.</span></span> <span data-ttu-id="a6574-109">Для каждого порядка сортировки используется разный код, сравнивающий две звезды.</span><span class="sxs-lookup"><span data-stu-id="a6574-109">The code that compares two stars is different for each of the sort orderings.</span></span>

<span data-ttu-id="a6574-110">Такого рода решения использовались в программном обеспечении в течение полувека.</span><span class="sxs-lookup"><span data-stu-id="a6574-110">These kinds of solutions have been used in software for half a century.</span></span>
<span data-ttu-id="a6574-111">Концепция использования делегатов в языке C# обеспечивает первоклассную поддержку языка и безопасность типов.</span><span class="sxs-lookup"><span data-stu-id="a6574-111">The C# language delegate concept provides first class language support, and type safety around the concept.</span></span>

<span data-ttu-id="a6574-112">Как вы увидите далее в этой серии статей, код C#, создаваемый для подобных алгоритмов, является строго типизированным и использует правила языка и компилятор для соответствия типов аргументам и типам возвращаемых значений.</span><span class="sxs-lookup"><span data-stu-id="a6574-112">As you'll see later in this series, the C# code you write for algorithms like this is type safe, and uses the language rules and the compiler to ensure that the types match for arguments and return types.</span></span>

<span data-ttu-id="a6574-113">В C# 9 для похожих сценариев, где требуется больший контроль над соглашением о вызовах, были добавлены [указатели на функции](~/_csharplang/proposals/csharp-9.0/function-pointers.md).</span><span class="sxs-lookup"><span data-stu-id="a6574-113">[Function pointers](~/_csharplang/proposals/csharp-9.0/function-pointers.md) were added to C# 9 for similar scenarios, where you need more control over the calling convention.</span></span> <span data-ttu-id="a6574-114">Код, связанный с делегатом, вызывается с помощью виртуального метода, добавленного к типу делегата.</span><span class="sxs-lookup"><span data-stu-id="a6574-114">The code associated with a delegate is invoked using a virtual method added to a delegate type.</span></span> <span data-ttu-id="a6574-115">Используя указатели функций, можно указать другие соглашения.</span><span class="sxs-lookup"><span data-stu-id="a6574-115">Using function pointers, you can specify different conventions.</span></span>

## <a name="language-design-goals-for-delegates"></a><span data-ttu-id="a6574-116">Цели разработки языка для делегатов</span><span class="sxs-lookup"><span data-stu-id="a6574-116">Language Design Goals for Delegates</span></span>

<span data-ttu-id="a6574-117">Разработчики, использующие язык, определили несколько целей для функций, которые в итоге стали делегатами.</span><span class="sxs-lookup"><span data-stu-id="a6574-117">The language designers enumerated several goals for the feature that eventually became delegates.</span></span>

<span data-ttu-id="a6574-118">Группе разработчиков требовалась общая языковая конструкция, которую можно было бы использовать для любых алгоритмов позднего связывания.</span><span class="sxs-lookup"><span data-stu-id="a6574-118">The team wanted a common language construct that could be used for any late binding algorithms.</span></span> <span data-ttu-id="a6574-119">Делегаты позволяют разработчикам изучить одну концепцию и применять ее для решения множества различных задач программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="a6574-119">Delegates enable developers to learn one concept, and use that same concept across many different software problems.</span></span>

<span data-ttu-id="a6574-120">Во-вторых, команде нужна поддержка одиночных и многоадресных вызовов методов.</span><span class="sxs-lookup"><span data-stu-id="a6574-120">Second, the team wanted to support both single and multicast method calls.</span></span> <span data-ttu-id="a6574-121">(Многоадресные делегаты — это делегаты, которые объединяют в цепочку несколько вызовов методов.</span><span class="sxs-lookup"><span data-stu-id="a6574-121">(Multicast delegates are delegates that chain together multiple method calls.</span></span>
<span data-ttu-id="a6574-122">Вы увидите примеры [далее в этой серии](delegate-class.md).)</span><span class="sxs-lookup"><span data-stu-id="a6574-122">You'll see examples [later in this series](delegate-class.md).)</span></span>

<span data-ttu-id="a6574-123">Группа разработчиков хотела, чтобы делегаты поддерживали ту же безопасность типа, ожидаемую от всех конструкций C#.</span><span class="sxs-lookup"><span data-stu-id="a6574-123">The team wanted delegates to support the same type safety that developers expect from all C# constructs.</span></span>

<span data-ttu-id="a6574-124">Наконец группа пришла к выводу, что шаблон событий является определенным шаблоном, где использование делегатов (или любого алгоритма позднего связывания) очень эффективно.</span><span class="sxs-lookup"><span data-stu-id="a6574-124">Finally, the team recognized an event pattern is one specific pattern where delegates, or any late binding algorithm, is very useful.</span></span> <span data-ttu-id="a6574-125">Разработчикам требовалось, чтобы код для делегатов служил основой для шаблона событий .NET.</span><span class="sxs-lookup"><span data-stu-id="a6574-125">The team wanted to ensure the code for delegates could provide the basis for the .NET event pattern.</span></span>

<span data-ttu-id="a6574-126">Результатом всей этой работы стала поддержка делегатов и событий в C# и .NET.</span><span class="sxs-lookup"><span data-stu-id="a6574-126">The result of all that work was the delegate and event support in C# and .NET.</span></span> <span data-ttu-id="a6574-127">В оставшихся статьях в этом разделе будут рассматриваться возможности языка, поддержка библиотек и распространенные идиомы, которые применяются при работе с делегатами.</span><span class="sxs-lookup"><span data-stu-id="a6574-127">The remaining articles in this section will cover language features, library support, and common idioms used when you work with delegates.</span></span>

<span data-ttu-id="a6574-128">Вы узнаете о ключевом слове `delegate` и коде, который он создает.</span><span class="sxs-lookup"><span data-stu-id="a6574-128">You'll learn about the `delegate` keyword and what code it generates.</span></span> <span data-ttu-id="a6574-129">Вы узнаете о функциях в классе `System.Delegate` и их использовании.</span><span class="sxs-lookup"><span data-stu-id="a6574-129">You'll learn about the features in the `System.Delegate` class, and how those features are used.</span></span> <span data-ttu-id="a6574-130">Вы научитесь создавать типобезопасные делегаты и ознакомитесь со способами создания методов, которые можно вызывать с помощью делегатов.</span><span class="sxs-lookup"><span data-stu-id="a6574-130">You'll learn how to create type safe delegates, and how to create methods that can be invoked through delegates.</span></span> <span data-ttu-id="a6574-131">Вы также узнаете, как работать с делегатами и событиями с помощью лямбда-выражения.</span><span class="sxs-lookup"><span data-stu-id="a6574-131">You'll also learn how to work with delegates and events by using Lambda expressions.</span></span> <span data-ttu-id="a6574-132">Вы увидите, каким образом делегаты становятся одними из стандартных блоков для LINQ.</span><span class="sxs-lookup"><span data-stu-id="a6574-132">You'll see where delegates become one of the building blocks for LINQ.</span></span> <span data-ttu-id="a6574-133">Вы узнаете, что делегаты являются основой для шаблона событий .NET, и определите их отличия.</span><span class="sxs-lookup"><span data-stu-id="a6574-133">You'll learn how delegates are the basis for the .NET event pattern, and how they're different.</span></span>

<span data-ttu-id="a6574-134">Итак, начнем.</span><span class="sxs-lookup"><span data-stu-id="a6574-134">Let's get started.</span></span>

[<span data-ttu-id="a6574-135">Вперед</span><span class="sxs-lookup"><span data-stu-id="a6574-135">Next</span></span>](delegate-class.md)
