---
title: Использование модели рабочей области пакета SDK для .NET Compiler Platform
description: Данный обзор описывает тип, используемый для отправки запросов к рабочей области и проектам для вашего кода и управления ими.
ms.date: 10/15/2017
ms.custom: mvc
ms.openlocfilehash: b613c85c01cc054dea9dd4bb9cf0062ffedb08bf
ms.sourcegitcommit: 8299abfbd5c49b596d61f1e4d09bc6b8ba055b36
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98899117"
---
# <a name="work-with-a-workspace"></a><span data-ttu-id="9cf36-103">Использование рабочей области</span><span class="sxs-lookup"><span data-stu-id="9cf36-103">Work with a workspace</span></span>

<span data-ttu-id="9cf36-104">Слой **Рабочие области** является отправной точкой для анализа кода и рефакторинга в рамках целых решений.</span><span class="sxs-lookup"><span data-stu-id="9cf36-104">The **Workspaces** layer is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="9cf36-105">В этом слое API рабочей области помогает упорядочить всю информацию о проектах в решении в рамках одной объектной модели, предоставляя вам прямой доступ к объектным моделям слоя компилятора, например тексту исходного кода, деревьям синтаксиса, семантическим моделям и компиляциям, без необходимости анализировать файлы, настраивать параметры или управлять зависимостями между проектами.</span><span class="sxs-lookup"><span data-stu-id="9cf36-105">Within this layer, the Workspace API assists you in organizing all the information about the projects in a solution into a single object model, offering you direct access to compiler layer object models like source text, syntax trees, semantic models, and compilations without needing to parse files, configure options, or manage inter-project dependencies.</span></span>

<span data-ttu-id="9cf36-106">Среды размещения, такие как интегрированная среда разработки, предоставляют рабочую область, соответствующую открытому решению.</span><span class="sxs-lookup"><span data-stu-id="9cf36-106">Host environments, like an IDE, provide a workspace for you corresponding to the open solution.</span></span> <span data-ttu-id="9cf36-107">Эту модель можно использовать и вне интегрированной среды разработки, просто загрузив файл решения.</span><span class="sxs-lookup"><span data-stu-id="9cf36-107">It is also possible to use this model outside of an IDE by simply loading a solution file.</span></span>

## <a name="workspace"></a><span data-ttu-id="9cf36-108">Рабочая область</span><span class="sxs-lookup"><span data-stu-id="9cf36-108">Workspace</span></span>

<span data-ttu-id="9cf36-109">Рабочая область является активным представлением вашего решения в виде коллекции проектов, каждый из которых содержит коллекцию документов.</span><span class="sxs-lookup"><span data-stu-id="9cf36-109">A workspace is an active representation of your solution as a collection of projects, each with a collection of documents.</span></span> <span data-ttu-id="9cf36-110">Рабочая область обычно привязывается к среде размещения, которая постоянно изменяется по мере того, как пользователь вводит или использует свойства.</span><span class="sxs-lookup"><span data-stu-id="9cf36-110">A workspace is typically tied to a host environment that is constantly changing as a user types or manipulates properties.</span></span>

<span data-ttu-id="9cf36-111"><xref:Microsoft.CodeAnalysis.Workspace> предоставляет доступ к текущей модели решения.</span><span class="sxs-lookup"><span data-stu-id="9cf36-111">The <xref:Microsoft.CodeAnalysis.Workspace> provides access to the current model of the solution.</span></span> <span data-ttu-id="9cf36-112">При возникновении изменения в среде размещения рабочая область выдает соответствующие события, после чего обновляется свойство <xref:Microsoft.CodeAnalysis.Workspace.CurrentSolution?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9cf36-112">When a change in the host environment occurs, the workspace fires corresponding events, and the <xref:Microsoft.CodeAnalysis.Workspace.CurrentSolution?displayProperty=nameWithType> property is updated.</span></span> <span data-ttu-id="9cf36-113">Например, когда пользовательские типы в текстовом редакторе соответствуют одному из исходных документов, рабочая область использует событие, чтобы сообщить всей модели об изменении решения и измененном документе.</span><span class="sxs-lookup"><span data-stu-id="9cf36-113">For example, when the user types in a text editor corresponding to one of the source documents, the workspace uses an event to signal that the overall model of the solution has changed and which document was modified.</span></span> <span data-ttu-id="9cf36-114">После этого вы можете отреагировать на такие изменения, проанализировав новую модель на корректность, выделив значимые области или внеся предложение по изменению кода.</span><span class="sxs-lookup"><span data-stu-id="9cf36-114">You can then react to those changes by analyzing the new model for correctness, highlighting areas of significance, or making a suggestion for a code change.</span></span>

<span data-ttu-id="9cf36-115">Кроме того, вы можете создать автономные рабочие области, которые отключены от среды размещения или используются в приложении без такой среды.</span><span class="sxs-lookup"><span data-stu-id="9cf36-115">You can also create stand-alone workspaces that are disconnected from the host environment or used in an application that has no host environment.</span></span>

## <a name="solutions-projects-and-documents"></a><span data-ttu-id="9cf36-116">Решения, проекты и документы</span><span class="sxs-lookup"><span data-stu-id="9cf36-116">Solutions, projects, and documents</span></span>

<span data-ttu-id="9cf36-117">Хотя рабочая область может меняться при каждом нажатии клавиши, вы можете работать с моделью решения изолированно.</span><span class="sxs-lookup"><span data-stu-id="9cf36-117">Although a workspace may change every time a key is pressed, you can work with the model of the solution in isolation.</span></span>

<span data-ttu-id="9cf36-118">Решение представляет собой неизменяемую модель проектов и документов.</span><span class="sxs-lookup"><span data-stu-id="9cf36-118">A solution is an immutable model of the projects and documents.</span></span> <span data-ttu-id="9cf36-119">Это означает, что модель можно использовать совместно без блокировки или дублирования.</span><span class="sxs-lookup"><span data-stu-id="9cf36-119">This means that the model can be shared without locking or duplication.</span></span> <span data-ttu-id="9cf36-120">После получения экземпляра решения из свойства <xref:Microsoft.CodeAnalysis.Workspace.CurrentSolution?displayProperty=nameWithType> этот экземпляр больше не меняется.</span><span class="sxs-lookup"><span data-stu-id="9cf36-120">After you obtain a solution instance from the <xref:Microsoft.CodeAnalysis.Workspace.CurrentSolution?displayProperty=nameWithType> property, that instance will never change.</span></span> <span data-ttu-id="9cf36-121">Однако, как и в случае с деревьями синтаксиса и компиляциями, вы можете изменять решения, создавая экземпляры на основе существующих решений и определенных изменений.</span><span class="sxs-lookup"><span data-stu-id="9cf36-121">However, like with syntax trees and compilations, you can modify solutions by constructing new instances based on existing solutions and specific changes.</span></span> <span data-ttu-id="9cf36-122">Чтобы рабочая область отражала ваши изменения, нужно явным образом применить измененное решение обратно к ней.</span><span class="sxs-lookup"><span data-stu-id="9cf36-122">To get the workspace to reflect your changes, you must explicitly apply the changed solution back to the workspace.</span></span>

<span data-ttu-id="9cf36-123">Проект является частью общей неизменяемой модели решения.</span><span class="sxs-lookup"><span data-stu-id="9cf36-123">A project is a part of the overall immutable solution model.</span></span> <span data-ttu-id="9cf36-124">Он представляет все документы исходного кода, параметры синтаксического анализа и компиляции, а также ссылки на сборки и ссылки между проектами.</span><span class="sxs-lookup"><span data-stu-id="9cf36-124">It represents all the source code documents, parse and compilation options, and both assembly and project-to-project references.</span></span> <span data-ttu-id="9cf36-125">Из проекта вы можете обратиться к соответствующей компиляции без необходимости определять зависимости проекта или анализировать исходные файлы.</span><span class="sxs-lookup"><span data-stu-id="9cf36-125">From a project, you can access the corresponding compilation without needing to determine project dependencies or parse any source files.</span></span>

<span data-ttu-id="9cf36-126">Документ также является частью общей неизменяемой модели решения.</span><span class="sxs-lookup"><span data-stu-id="9cf36-126">A document is also a part of the overall immutable solution model.</span></span> <span data-ttu-id="9cf36-127">Он представляет один исходный файл, из которого можно обратиться к тексту файла, дереву синтаксиса и семантической модели.</span><span class="sxs-lookup"><span data-stu-id="9cf36-127">A document represents a single source file from which you can access the text of the file, the syntax tree, and the semantic model.</span></span>

<span data-ttu-id="9cf36-128">Следующая схема показывает, как рабочая область связана со средой размещения, средствами и способом внесения изменений.</span><span class="sxs-lookup"><span data-stu-id="9cf36-128">The following diagram is a representation of how the Workspace relates to the host environment, tools, and how edits are made.</span></span>

![Связи между различными элементами рабочей области, содержащей проекты и исходные файлы](media/work-with-workspace/workspace-obj-relations.png)

## <a name="summary"></a><span data-ttu-id="9cf36-130">Сводка</span><span class="sxs-lookup"><span data-stu-id="9cf36-130">Summary</span></span>

<span data-ttu-id="9cf36-131">Roslyn содержит набор API компиляторов и API рабочих областей, предоставляющий подробные сведения об исходном коде и обеспечивающий полную точность для языков C# и Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="9cf36-131">Roslyn exposes a set of compiler APIs and Workspaces APIs that provides rich information about your source code and that has full fidelity with the C# and Visual Basic languages.</span></span>  <span data-ttu-id="9cf36-132">Пакет SDK для .NET Compiler Platform значительно сокращает требования к созданию средств и приложений, ориентированных на код.</span><span class="sxs-lookup"><span data-stu-id="9cf36-132">The .NET Compiler Platform SDK dramatically lowers the barrier to entry for creating code-focused tools and applications.</span></span> <span data-ttu-id="9cf36-133">Он предоставляет множество возможностей для инноваций в таких областях, как метапрограммирование, создание и преобразование кода, интерактивное использование языков C# и Visual Basic, а также их внедрение в доменные языки.</span><span class="sxs-lookup"><span data-stu-id="9cf36-133">It creates many opportunities for innovation in areas such as meta-programming, code generation and transformation, interactive use of the C# and Visual Basic languages, and embedding of C# and Visual Basic in domain-specific languages.</span></span>  
